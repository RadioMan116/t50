!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=preact},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(2);$(document).ready(function(){o.render(o.h(r.default,null),document.getElementById("analogs"))})},function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(r,a){function l(t){try{u(o.next(t))}catch(t){a(t)}}function i(t){try{u(o.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(l,i)}u((o=o.apply(t,e||[])).next())})},l=this&&this.__generator||function(t,e){var n,o,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(a){return function(i){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return l.label++,{value:a[1],done:!1};case 5:l.label++,o=a[1],a=[0];continue;case 7:a=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){l=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){l.label=a[1];break}if(6===a[0]&&l.label<r[1]){l.label=r[1],r=a;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(a);break}r[2]&&l.ops.pop(),l.trys.pop();continue}a=e.call(t,l)}catch(t){a=[6,t],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,i])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),u=function(t){function e(e){var n=t.call(this,e)||this;return n.state={product_id:0,analog_id:0,comment:""},$(".modal[id='analogs']").on("modal_loaded",function(t,e){n.setState(e.$orig.data())}),$(".modal[id='manual']").on("modal_close",function(t,e){n.setState({product_id:0,analog_id:0,comment:""})}),n}return r(e,t),e.prototype.componentDidMount=function(){var t=this;$(this.select).select2({tags:!0,ajax:{url:"/ajax/catalog.element/analogs/",type:"post",dataType:"json",headers:{"X-CSRF-TOKEN":$("meta[name='sessid']").attr("content")},data:function(t){return{search:t.term}},delay:500,processResults:function(t){return{results:t.data}}}}).on("select2:select",function(e){var n=parseInt(e.target.value);n>0&&t.setState({analog_id:n})})},e.prototype.submit=function(){return a(this,void 0,void 0,function(){var t;return l(this,function(e){return t={product_id:this.state.product_id,comment:this.state.comment,analog_id:this.state.analog_id},T50PubSub.send("set_analog_submit",t),[2]})})},e.prototype.changeComment=function(t){var e=t.target.value;this.setState({comment:e})},e.prototype.render=function(){var t=this;return i.h("div",null,i.h("h3",{class:"modal__title modal__title_align_center"},"Добавление аналогов"),i.h("div",{class:"modal__content"},i.h("form",{class:"form"},i.h("label",{class:"form__line"},i.h("label",{class:"form__label"},"Введите аналог"),i.h("select",{class:"modal__select",ref:function(e){return t.select=e}})),i.h("label",{class:"form__line"},i.h("span",{class:"form__label"},"Обоснование"),i.h("textarea",{class:"form__textarea",value:this.state.comment,onInput:this.changeComment.bind(this)})),i.h("div",{class:"form__controls form__controls_align_center modal__controls"},i.h("div",{class:"form__control modal__control"},i.h("button",{class:"button button_width_full",type:"button",onClick:this.submit.bind(this)},"Добавить"))))))},e}(i.Component);e.default=u}]);