!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=33)}([function(t,e){t.exports=preact},function(t,e,n){"use strict";n.r(e),n.d(e,"Provider",function(){return _}),n.d(e,"ReactReduxContext",function(){return d}),n.d(e,"connect",function(){return at}),n.d(e,"connectAdvanced",function(){return j});var r=n(0),a=n(31),s=n(16);function i(){return(i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function l(t,e){if(null==t)return{};var n,r,a={},s=Object.keys(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||(a[n]=t[n]);return a}function c(){}var u={createContext:a.createContext,forwardRef:c,createElement:r.h},d=u.createContext(null),_=function(t){function e(e){var n;n=t.call(this,e)||this;var r=e.store;return n.state={storeState:r.getState(),store:r},n}o(e,t);var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this.subscribe()},n.componentWillUnmount=function(){this.unsubscribe&&this.unsubscribe(),this._isMounted=!1},n.componentDidUpdate=function(t){this.props.store!==t.store&&(this.unsubscribe&&this.unsubscribe(),this.subscribe())},n.subscribe=function(){var t=this,e=this.props.store;this.unsubscribe=e.subscribe(function(){var n=e.getState();t._isMounted&&t.setState(function(t){return t.storeState===n?null:{storeState:n}})});var n=e.getState();n!==this.state.storeState&&this.setState({storeState:n})},n.render=function(){var t=this.props.context||d;return u.createElement(t.Provider,{value:this.state},this.props.children)},e}(r.Component);function f(t,e){return t(e={exports:{}},e.exports),e.exports}var h,p=f(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=60103,r=60106,a=60107,s=60108,i=60114,o=60109,l=60110,c=60111,u=60111,d=60112,_=60113,f=60115,h=60116;function p(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case n:switch(t=t.type){case c:case u:case a:case i:case s:case _:return t;default:switch(t=t&&t.$$typeof){case l:case d:case o:return t;default:return e}}case h:case f:case r:return e}}}function v(t){return p(t)===u}e.typeOf=p,e.AsyncMode=c,e.ConcurrentMode=u,e.ContextConsumer=l,e.ContextProvider=o,e.Element=n,e.ForwardRef=d,e.Fragment=a,e.Lazy=h,e.Memo=f,e.Portal=r,e.Profiler=i,e.StrictMode=s,e.Suspense=_,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===a||t===u||t===i||t===s||t===_||"object"==typeof t&&null!==t&&(t.$$typeof===h||t.$$typeof===f||t.$$typeof===o||t.$$typeof===l||t.$$typeof===d)},e.isAsyncMode=function(t){return v(t)||p(t)===c},e.isConcurrentMode=v,e.isContextConsumer=function(t){return p(t)===l},e.isContextProvider=function(t){return p(t)===o},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===n},e.isForwardRef=function(t){return p(t)===d},e.isFragment=function(t){return p(t)===a},e.isLazy=function(t){return p(t)===h},e.isMemo=function(t){return p(t)===f},e.isPortal=function(t){return p(t)===r},e.isProfiler=function(t){return p(t)===i},e.isStrictMode=function(t){return p(t)===s},e.isSuspense=function(t){return p(t)===_}});(h=p)&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")&&h.default;p.typeOf,p.AsyncMode,p.ConcurrentMode,p.ContextConsumer,p.ContextProvider,p.Element,p.ForwardRef,p.Fragment,p.Lazy,p.Memo,p.Portal,p.Profiler,p.StrictMode,p.Suspense,p.isValidElementType,p.isAsyncMode,p.isConcurrentMode,p.isContextConsumer,p.isContextProvider,p.isElement,p.isForwardRef,p.isFragment,p.isLazy,p.isMemo,p.isPortal,p.isProfiler,p.isStrictMode,p.isSuspense;var v=f(function(t){t.exports=p}),b=(v.isValidElementType,v.isContextConsumer),m={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},y={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},O={};function w(t){return v.isMemo(t)?g:O[t.$$typeof]||m}O[v.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var A=Object.defineProperty,k=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,C=Object.getOwnPropertyDescriptor,P=Object.getPrototypeOf,T=Object.prototype;var S=function t(e,n,r){if("string"!=typeof n){if(T){var a=P(n);a&&a!==T&&t(e,a,r)}var s=k(n);x&&(s=s.concat(x(n)));for(var i=w(e),o=w(n),l=0;l<s.length;++l){var c=s[l];if(!(y[c]||r&&r[c]||o&&o[c]||i&&i[c])){var u=C(n,c);try{A(e,c,u)}catch(t){}}}return e}return e};function j(t,e){var n=void 0===e?{}:e,a=n.getDisplayName,s=void 0===a?function(t){return"ConnectAdvanced("+t+")"}:a,c=n.methodName,_=void 0===c?"connectAdvanced":c,f=n.renderCountProp,h=void 0===f?void 0:f,p=n.shouldHandleStateChanges,v=void 0===p||p,m=n.storeKey,y=void 0===m?"store":m,g=(n.withRef,n.forwardRef),O=void 0!==g&&g,w=n.context,A=void 0===w?d:w,k=l(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),x=A;return function(e){var n=e.displayName||e.name||"Component",a=s(n),l=i({},k,{getDisplayName:s,methodName:_,renderCountProp:h,shouldHandleStateChanges:v,storeKey:y,displayName:a,wrappedComponentName:n,WrappedComponent:e}),c=k.pure,d=r.Component;c&&(d=r.Component);var f=function(n){function r(e){var r,a,s,o,l,d,_,f,h,p,v;return r=n.call(this,e)||this,O?e.wrapperProps[y]:e[y],r.selectDerivedProps=function(e,n,r,i){if(c&&a===n&&s===e)return o;r===l&&d===i||(l=r,d=i,_=t(r.dispatch,i)),a=n,s=e;var u=_(e,n);return o=u},r.selectChildElement=function(t,e,n){return e===f&&n===h&&v===t||(f=e,h=n,v=t,p=u.createElement(t,i({},e,{ref:n}))),p},r.indirectRenderWrappedComponent=r.indirectRenderWrappedComponent.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r)),r}o(r,n);var a=r.prototype;return a.indirectRenderWrappedComponent=function(t){return this.renderWrappedComponent(t)},a.renderWrappedComponent=function(t){var n,r=t.storeState,a=t.store,s=this.props;O&&(s=this.props.wrapperProps,n=this.props.forwardedRef);var i=this.selectDerivedProps(r,s,a,l);return this.selectChildElement(e,i,n)},a.render=function(){var t=this.props.context&&this.props.context.Consumer&&b(u.createElement(this.props.context.Consumer,null))?this.props.context:x;return u.createElement(t.Consumer,null,this.indirectRenderWrappedComponent)},r}(d);if(f.WrappedComponent=e,f.displayName=a,O){var p=u.forwardRef(function(t,e){return u.createElement(f,{wrapperProps:t,forwardedRef:e})});return p.displayName=a,p.WrappedComponent=e,S(p,e)}return S(f,e)}}var I=Object.prototype.hasOwnProperty;function E(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function L(t,e){if(E(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!I.call(e,n[a])||!E(t[n[a]],e[n[a]]))return!1;return!0}function M(t){return function(e,n){var r=t(e,n);function a(){return r}return a.dependsOnOwnProps=!1,a}}function D(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function N(t,e){return function(e,n){n.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=D(t);var a=r(e,n);return"function"==typeof a&&(r.mapToProps=a,r.dependsOnOwnProps=D(a),a=r(e,n)),a},r}}var R=[function(t){return"function"==typeof t?N(t):void 0},function(t){return t?void 0:M(function(t){return{dispatch:t}})},function(t){return t&&"object"==typeof t?M(function(e){return Object(s.bindActionCreators)(t,e)}):void 0}];var z=[function(t){return"function"==typeof t?N(t):void 0},function(t){return t?void 0:M(function(){return{}})}];function U(t,e,n){return i({},n,t,e)}var F=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var r,a=n.pure,s=n.areMergedPropsEqual,i=!1;return function(e,n,o){var l=t(e,n,o);return i?a&&s(l,r)||(r=l):(i=!0,r=l),r}}}(t):void 0},function(t){return t?void 0:function(){return U}}];function B(t,e,n,r){return function(a,s){return n(t(a,s),e(r,s),s)}}function q(t,e,n,r,a){var s,i,o,l,c,u=a.areStatesEqual,d=a.areOwnPropsEqual,_=a.areStatePropsEqual,f=!1;function h(a,f){var h,p,v=!d(f,i),b=!u(a,s);return s=a,i=f,v&&b?(o=t(s,i),e.dependsOnOwnProps&&(l=e(r,i)),c=n(o,l,i)):v?(t.dependsOnOwnProps&&(o=t(s,i)),e.dependsOnOwnProps&&(l=e(r,i)),c=n(o,l,i)):b?(h=t(s,i),p=!_(h,o),o=h,p&&(c=n(o,l,i)),c):c}return function(a,u){return f?h(a,u):(o=t(s=a,i=u),l=e(r,i),c=n(o,l,i),f=!0,c)}}function J(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,a=e.initMergeProps,s=l(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),i=n(t,s),o=r(t,s),c=a(t,s);return(s.pure?q:B)(i,o,c,t,s)}function $(t,e,n){for(var r=e.length-1;r>=0;r--){var a=e[r](t);if(a)return a}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function V(t,e){return t===e}var Y,W,G,H,K,Q,X,Z,tt,et,nt,rt,at=(G=(W=void 0===Y?{}:Y).connectHOC,H=void 0===G?j:G,K=W.mapStateToPropsFactories,Q=void 0===K?z:K,X=W.mapDispatchToPropsFactories,Z=void 0===X?R:X,tt=W.mergePropsFactories,et=void 0===tt?F:tt,nt=W.selectorFactory,rt=void 0===nt?J:nt,function(t,e,n,r){var a=void 0===r?{}:r,s=a.pure,o=void 0===s||s,c=a.areStatesEqual,u=void 0===c?V:c,d=a.areOwnPropsEqual,_=void 0===d?L:d,f=a.areStatePropsEqual,h=void 0===f?L:f,p=a.areMergedPropsEqual,v=void 0===p?L:p,b=l(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),m=$(t,Q,"mapStateToProps"),y=$(e,Z,"mapDispatchToProps"),g=$(n,et,"mergeProps");return H(rt,i({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:m,initMapDispatchToProps:y,initMergeProps:g,pure:o,areStatesEqual:u,areOwnPropsEqual:_,areStatePropsEqual:h,areMergedPropsEqual:v},b))}),st={Provider:_,connect:at,connectAdvanced:j,ReactReduxContext:d};e.default=st},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),a=function(){function t(){}return t.getSelectItem=function(t,e){var n;return null===(n=e.find(function(e){return e.val==t}))||void 0===n?void 0:n.title},t.indexArrayToSelectItems=function(t){return t.map(function(t){return{val:t,title:t}})},t.getManager=function(t){var e;return null===(e=r.store.getState().order.managers.find(function(e){return e.id==t}))||void 0===e?void 0:e.name},t.getManagersForSelection=function(){return r.store.getState().order.managers.map(function(t){return{val:t.id,title:t.name}})},t.getMultipleUpdateFlag=function(t,e){return-1!=["mkad_km","vip","visit_master_km"].indexOf(e)?{}:!0===r.store.getState().once_supplier[t]?{multiple_update_mode:"Y"}:{}},t}();e.default=a},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(52),o=n(29),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jqueryUpdate=!1,e}return a(e,t),e.prototype.componentDidUpdate=function(){this.initJQueryUI()},e.prototype.shouldComponentUpdate=function(t,e){return!o.default.isDeepEquals(this.props,t)},e.prototype.initJQueryUI=function(){i.default.commonEffectsStack(),this.jqueryUpdate||(this.jqueryUpdate=!0,i.default.select(this.base),i.default.modal(),i.default.tooltip(this.base))},e}(s.Component);e.default=l},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=function(){function t(){}return t.dispatch=function(t,e){s.store.dispatch({type:t,payload:e})},t.updateLogs=function(){var t=s.store.getState().order.order_id;T50PubSub.subscribe("load_history",function(t){return r(this,void 0,void 0,function(){var e;return a(this,function(n){switch(n.label){case 0:return[4,t];case 1:return e=n.sent(),$("#load_history").html(e),[2]}})})}),T50PubSub.send("load_history",T50Ajax.postHtml("orders.detail","load_history",{order_id:t}))},t.showMessage=function(t,e){t.result?T50Notify.success("обновлено"):(console.error(t),(null!=e?e:"").length&&T50Notify.error(e))},t.getOrderId=function(){var e,n;return null===(n=null===(e=t.getState())||void 0===e?void 0:e.order)||void 0===n?void 0:n.order_id},t.getState=function(){return s.store.getState()},t}();e.default=i},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var s=arguments[e],i=0,o=s.length;i<o;i++,a++)r[a]=s[i];return r};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:e.value},n}return a(e,t),e.key=function(){return"select_key_"+ ++e.KEY_COUNTER},e.prototype.componentWillReceiveProps=function(t){this.setState({value:t.value})},e.prototype.componentDidMount=function(){this.el=$(this.ref),this.ref.onchange=this.select.bind(this)},e.prototype.componentWillUnmount=function(){$("select.select2-hidden-accessible").select2("destroy")},e.prototype.select=function(t){var e=t.target,n=this.getItems().find(function(t){return t.val==e.value});null!=n&&(this.setState({value:n.val}),null!=this.props.onSelect&&this.props.onSelect(n))},e.prototype.getItems=function(){var t,e=s(this.props.items),n=this.props.default;return null!=n&&(n.disabled=null==(t=n.disabled)||t,e.unshift(n)),e},e.prototype.getOptions=function(){var t=this;return this.getItems().map(function(e){var n,r=e.val==t.state.value,a=null!=(n=e.disabled)&&n;return i.h("option",{disabled:a,value:e.val,selected:r},e.title)})},e.prototype.render=function(){var t=this,e=0==this.props.items.length;return i.h("select",{disabled:e,ref:function(e){return t.ref=e},class:this.props.class,value:this.state.value},this.getOptions())},e.KEY_COUNTER=0,e}(i.Component);e.default=o},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),l=n(17),c=n(12),u=n(13),d=n(19),_=n(20),f=n(14);e.ORDER_LOAD_STATISTIC="ORDER_LOAD_STATISTIC",e.ORDER_LOAD_DINAMIC="ORDER_LOAD_DINAMIC",e.ORDER_CHANGE_SHARE_MANAGER="ORDER_CHANGE_SHARE_MANAGER";var h=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadOrder=function(){return s(this,void 0,void 0,function(){var t,r;return i(this,function(a){switch(a.label){case 0:return t=o.default.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","order_load",{order_id:t})];case 1:return(r=a.sent()).result?(n.dispatch(e.ORDER_LOAD_DINAMIC,r.data),[2,r.result]):(T50Notify.error("Ошибка"),[2,!1])}})})},n.loadAllPrices=function(){return s(this,void 0,void 0,function(){var t,e;return i(this,function(n){switch(n.label){case 0:return t=o.default.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","load_all_prices",{order_id:t,load_all:!0})];case 1:return(e=n.sent()).result?(u.default.dispatch(u.BASKET_LOAD_ALL,e.data.BASKET),c.default.dispatch(c.ACCOUNT_LOAD_ITEMS,e.data.ACCOUNT.items),d.default.dispatch(d.DELIVERY_LOAD_ALL,e.data.DELIVERY),_.default.dispatch(_.INSTALLATION_LOAD_ALL,e.data.INSTALLATION),f.default.dispatch(f.PROFIT_LOAD_ALL,e.data.PROFIT),[2,e.result]):(T50Notify.error("Ошибка"),[2,!1])}})})},n.loadStatic=function(){return s(this,void 0,void 0,function(){var t,r;return i(this,function(a){switch(a.label){case 0:return t=o.default.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","load_static",{order_id:t})];case 1:return(r=a.sent()).result?(n.dispatch(e.ORDER_LOAD_STATISTIC,r.data),l.default.load(),[2,!0]):(T50Notify.error("Невозможно загрузить заказ"),[2,!1])}})})},n.getOrderId=function(){var t=document.location.pathname.match(/\/orders\/(\d+)\//);if(null==t)return 0;var e=parseInt(t[1]);return isNaN(e)?0:e},n.setValue=function(t,r){return s(this,void 0,void 0,function(){var a,s;return i(this,function(i){switch(i.label){case 0:return a=o.default.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","order_update",{order_id:a,code:t,value:r})];case 1:return s=i.sent(),n.showMessage(s,"ошибка"),s.result&&(n.dispatch(e.ORDER_LOAD_DINAMIC,s.data),n.updateLogs()),[2,s.result]}})})},n}(o.default);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(0);e.default=function(t){return r.h("svg",{class:t.class},r.h("use",{xlinkHref:"/local/templates/main/assets/images/icon.svg#"+t.name}))}},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=function(t){function e(e){var n=t.call(this,e)||this;return n.state={checked:!1},n.propsToState(e),n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.propsToState(t)},e.prototype.propsToState=function(t){var e=null!=t.checked&&t.checked;this.setState({checked:e})},e.prototype.onChange=function(){var t=!this.state.checked,e=!0;if(null!=this.props.onClick){var n=this.props.onClick(t);this.props.awaitConfirm&&!0!==n&&(e=!1)}this.setState({checked:e?t:this.state.checked})},e.prototype.render=function(){var t="checkbox_"+ ++e.checkboxCounter;return s.h("div",{class:"check-elem"},s.h("input",{type:"checkbox",id:t,class:"check-elem__input",checked:this.state.checked,onChange:this.onChange.bind(this)}),s.h("label",{for:t,class:"check-elem__label"},this.props.text))},e.checkboxCounter=0,e}(s.Component);e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),a=function(){function t(){}return t.fnum=function(t){return null==t?"":("string"==typeof t&&(t=parseInt(t)),t.toLocaleString("ru-RU"))},t.getMonthsArr=function(){var t=[];for(var e in r.MONTHS)t.push({val:e,title:r.MONTHS[e]});return t},t.alt=function(t,e){return null==t?e:0==t||0==t.toString().length?e:t},t.isEmptyList=function(t){return null==t||0==t.length},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=n(36);e.store=r.createStore(a.RootReducer)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(7),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={value:""},e}return a(e,t),e.prototype.componentDidMount=function(){var t=this;this.setState({value:this.props.value}),"time"!=this.props.type?$(this.inputDate).datetimepicker({timepicker:!1,format:"d.m.Y",scrollMonth:!1,scrollInput:!1}).on("change",function(e){t.onChange(e)}):$(this.inpuTime).change(function(e){t.onChange(e)})},e.prototype.componentWillReceiveProps=function(t){this.state.value!=t.value&&this.setState({value:t.value})},e.prototype.onChange=function(t){this.state.value!=t.target.value&&(this.setState({value:t.target.value}),null!=this.props.onChange&&this.props.onChange(t))},e.prototype.renderDate=function(){var t,e=this;return s.h("label",{class:(t=this.props.showIcon,null==t||t?"form__input-wrapper":"")},s.h("input",{type:"text",value:this.state.value,class:"form__input",ref:function(t){return e.inputDate=t}}),this.props.showIcon?s.h(i.default,{name:"icon_calendar",class:"form__input-icon"}):null)},e.prototype.renderTime=function(){var t=this;return s.h("input",{value:this.state.value,class:"form__input js-time",ref:function(e){return t.inpuTime=e}})},e.prototype.render=function(){return"date"==this.props.type?this.renderDate():this.renderTime()},e}(s.Component);e.default=o},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(4),c=n(13),u=n(2),d=n(6);e.ACCOUNT_LOAD_ITEMS="ACCOUNT_LOAD_ITEMS",e.ACCOUNT_LOAD_ITEM="ACCOUNT_LOAD_ITEM";var _=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadAll=function(){return i(this,void 0,void 0,function(){var t,r;return o(this,function(a){switch(a.label){case 0:return t=l.default.getOrderId(),[4,T50Ajax.postJson("orders.detail","account_load",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.ACCOUNT_LOAD_ITEMS,r.data.items):T50Notify.error("Не найдены номера счетов и заказов"),[2]}})})},n.setValue=function(t,r,a,c){return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:return[4,T50Ajax.postJson("orders.detail","account_update",s({order_id:t,basket_id:r,code:a,value:c},u.default.getMultipleUpdateFlag("accounts",a)))];case 1:return(i=o.sent()).result?(T50Notify.success("обновлено"),l.default.updateLogs()):T50Notify.error("ошибка при обновлении данных по счетам"),u.default.getMultipleUpdateFlag("accounts",a).multiple_update_mode?n.loadAll():n.dispatch(e.ACCOUNT_LOAD_ITEM,i.data),[2]}})})},n.removeRow=function(t,r,a){return i(this,void 0,void 0,function(){var s;return o(this,function(i){switch(i.label){case 0:return[4,T50Ajax.postJson("orders.detail","account_remove_row",{order_id:t,basket_id:r,index:a})];case 1:return(s=i.sent()).result?(T50Notify.success("обновлено"),l.default.updateLogs()):T50Notify.error("ошибка при удалении строки со счетами"),n.dispatch(e.ACCOUNT_LOAD_ITEM,s.data),[2]}})})},n.setSupplier=function(t,e,n){return i(this,void 0,void 0,function(){return o(this,function(r){switch(r.label){case 0:return[4,T50Ajax.postJson("orders.detail","basket_update",s({order_id:t,id:e,code:"supplier_id",value:n},u.default.getMultipleUpdateFlag("accounts","")))];case 1:return r.sent().result?(T50Notify.success("обновлено"),[4,c.default.loadAll(t)]):[3,3];case 2:return r.sent(),d.default.loadAllPrices(),l.default.updateLogs(),[3,4];case 3:T50Notify.error("ошибка при обновлении поставщика"),r.label=4;case 4:return[2]}})})},n}(l.default);e.default=_},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),l=n(18),c=n(6);e.BASKET_LOAD_ALL="BASKET_LOAD_ALL";var u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadAll=function(t){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","basket_load",{order_id:t})];case 1:return(r=a.sent()).result?(n.dispatch(e.BASKET_LOAD_ALL,r.data),[2]):(console.error(r),T50Notify.error("ошибка при загрузке корзины"),[2])}})})},n.create=function(t,e,n){return s(this,void 0,void 0,function(){var r,a;return i(this,function(s){switch(s.label){case 0:return r={order_id:t,product_price_id:e},n>0&&(r.exchange_basket_id=n),[4,T50Ajax.postJson("orders.detail","basket_create",r)];case 1:return a=s.sent(),o.default.showMessage(a,"ошибка при обновлении корзины"),a.result&&c.default.loadAllPrices(),[2]}})})},n.setManual=function(t,e,r,a,l){return s(this,void 0,void 0,function(){var s;return i(this,function(i){switch(i.label){case 0:return[4,T50Ajax.postJson("orders.detail","basket_set_manual",{order_id:t,id:e,price:r,comment:a,modal_key:l})];case 1:return s=i.sent(),o.default.showMessage(s,"ошибка при установке ручника"),n.loadAll(t),s.result&&n.fastUpdate(),[2,s.result]}})})},n.delete=function(t,e){return s(this,void 0,void 0,function(){var n;return i(this,function(r){switch(r.label){case 0:return[4,T50Ajax.postJson("orders.detail","basket_delete",{order_id:t,id:e})];case 1:return n=r.sent(),o.default.showMessage(n,"ошибка при удалении товара из корзины"),n.result&&c.default.loadAllPrices(),[2]}})})},n.setValue=function(t,e,r,a,l){return void 0===l&&(l=!1),s(this,void 0,void 0,function(){var s;return i(this,function(i){switch(i.label){case 0:return[4,T50Ajax.postJson("orders.detail","basket_update",{order_id:t,id:e,code:r,value:a})];case 1:return s=i.sent(),o.default.showMessage(s,"ошибка при обновлении коризны"),n.loadAll(t),s.result&&(l?c.default.loadAllPrices():n.fastUpdate()),[2,s.result]}})})},n}(l.default);e.default=u},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),l=n(10),c=n(6);e.PROFIT_LOAD_ALL="PROFIT_LOAD_ALL";var u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadByOrderId=function(){return s(this,void 0,void 0,function(){var t,r;return i(this,function(a){switch(a.label){case 0:return t=l.store.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","load_profit",{order_id:t})];case 1:return(r=a.sent()).result?(n.dispatch(e.PROFIT_LOAD_ALL,r.data),[2]):(console.error(r),T50Notify.error("ошибка при загрузке сводной таблицы"),[2])}})})},n.setBasketSupplierCommission=function(t,e){return s(this,void 0,void 0,function(){var r,a;return i(this,function(s){switch(s.label){case 0:return r=l.store.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","basket_update",{order_id:r,id:t.id,code:"suppl_commission",value:e})];case 1:return a=s.sent(),o.default.showMessage(a,"ошибка при изменении коммиссии поставщика"),n.loadByOrderId(),[2,a.result]}})})},n.setInstalSupplierCommission=function(t,e){return s(this,void 0,void 0,function(){var r,a;return i(this,function(s){switch(s.label){case 0:return r=l.store.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","installation_update",{order_id:r,id:t.id,code:"suppl_commission",value:e})];case 1:return a=s.sent(),o.default.showMessage(a,"ошибка при изменении коммиссии поставщика (установка)"),n.loadByOrderId(),[2,a.result]}})})},n.setBasketAccountMonth=function(t,e,r){return s(this,void 0,void 0,function(){var a,s;return i(this,function(i){switch(i.label){case 0:return a=l.store.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","basket_update",{order_id:a,id:e.id,code:t,value:r})];case 1:return s=i.sent(),o.default.showMessage(s,"ошибка при изменении отчетного месяца"),n.loadByOrderId(),[2,s.result]}})})},n.setInstalAccountMonth=function(t,e,r){return s(this,void 0,void 0,function(){var a,s;return i(this,function(i){switch(i.label){case 0:return a=l.store.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","installation_update",{order_id:a,id:e.id,code:t,value:r})];case 1:return s=i.sent(),o.default.showMessage(s,"ошибка при изменении отчетного месяца"),n.loadByOrderId(),[2,s.result]}})})},n.setShareManager=function(t){return s(this,void 0,void 0,function(){var e,r;return i(this,function(a){switch(a.label){case 0:return e=l.store.getState().order.order_id,[4,T50Ajax.postJson("orders.detail","order_update",{order_id:e,code:"share_com_manager",value:t})];case 1:return r=a.sent(),o.default.showMessage(r,"ошибка при распределении комиссии"),r.result&&n.dispatch(c.ORDER_CHANGE_SHARE_MANAGER,t),[2]}})})},n}(o.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(10),a=function(){function t(){}return t.getById=function(t){return r.store.getState().basket.items.find(function(e){return e.id==t})},t.getByIdField=function(e,n){var r=t.getById(e);if(null!=r)return r[n]},t.hasClaim=function(){return null!=r.store.getState().basket.items.find(function(t){return t.claim})},t.getBasketSuppliers=function(t){var e=r.store.getState().order.suppliers;if(null==t||0==t.length||null==e||0==e.length)return[];var n=t.map(function(t){return t.supplier_id});return n=n.filter(function(t,e){return n.indexOf(t)===e}),e.filter(function(t){return-1!=n.indexOf(t.val)})},t}();e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"__DO_NOT_USE__ActionTypes",function(){return s}),n.d(e,"applyMiddleware",function(){return v}),n.d(e,"bindActionCreators",function(){return d}),n.d(e,"combineReducers",function(){return c}),n.d(e,"compose",function(){return p}),n.d(e,"createStore",function(){return o});var r=n(21),a=function(){return Math.random().toString(36).substring(7).split("").join(".")},s={INIT:"@@redux/INIT"+a(),REPLACE:"@@redux/REPLACE"+a(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+a()}};function i(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function o(t,e,n){var a;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(o)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var l=t,c=e,u=[],d=u,_=!1;function f(){d===u&&(d=u.slice())}function h(){if(_)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function p(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(_)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return f(),d.push(t),function(){if(e){if(_)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,f();var n=d.indexOf(t);d.splice(n,1)}}}function v(t){if(!i(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(_)throw new Error("Reducers may not dispatch actions.");try{_=!0,c=l(c,t)}finally{_=!1}for(var e=u=d,n=0;n<e.length;n++){(0,e[n])()}return t}return v({type:s.INIT}),(a={dispatch:v,subscribe:p,getState:h,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");l=t,v({type:s.REPLACE})}})[r.a]=function(){var t,e=p;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(h())}return n(),{unsubscribe:e(n)}}})[r.a]=function(){return this},t},a}function l(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var a=e[r];0,"function"==typeof t[a]&&(n[a]=t[a])}var i,o=Object.keys(n);try{!function(t){Object.keys(t).forEach(function(e){var n=t[e];if(void 0===n(void 0,{type:s.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:s.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+s.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(t){i=t}return function(t,e){if(void 0===t&&(t={}),i)throw i;for(var r=!1,a={},s=0;s<o.length;s++){var c=o[s],u=n[c],d=t[c],_=u(d,e);if(void 0===_){var f=l(c,e);throw new Error(f)}a[c]=_,r=r||_!==d}return r?a:t}}function u(t,e){return function(){return e(t.apply(this,arguments))}}function d(t,e){if("function"==typeof t)return u(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in t){var a=t[r];"function"==typeof a&&(n[r]=u(a,e))}return n}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(n,!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},a={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=e.map(function(t){return t(a)});return h({},n,{dispatch:r=p.apply(void 0,s)(n.dispatch)})}}}},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),l=n(10),c=n(6);e.CLIENT_LOAD_DATA="CLIENT_LOAD_DATA",e.CLIENT_SEND_EMAIL="CLIENT_SEND_EMAIL";var u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.load=function(){return s(this,void 0,void 0,function(){var t,r;return i(this,function(a){switch(a.label){case 0:return t=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","client_load",{order_id:t})];case 1:return(r=a.sent()).result?(n.dispatch(e.CLIENT_LOAD_DATA,r.data),[2]):(T50Notify.error("Клиент не найден"),[2])}})})},n.change=function(t,r,a){return s(this,void 0,void 0,function(){var s,c;return i(this,function(i){switch(i.label){case 0:return s=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","client_update",{id:t,code:r,value:a,order_id:s})];case 1:return(c=i.sent()).result?(T50Notify.success("обновлено"),n.dispatch(e.CLIENT_LOAD_DATA,c.data),o.default.updateLogs()):(T50Notify.error("ошибка при обновлении данных клиента"),n.dispatch(e.CLIENT_LOAD_DATA,l.store.getState().client)),[2]}})})},n.setCity=function(t){return s(this,void 0,void 0,function(){var r,a;return i(this,function(s){switch(s.label){case 0:return r=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","order_update",{order_id:r,code:"city",value:t})];case 1:return(a=s.sent()).result?(T50Notify.success("обновлено"),n.dispatch(e.CLIENT_LOAD_DATA,a.data.client),c.default.dispatch(c.ORDER_LOAD_DINAMIC,a.data.order),o.default.updateLogs()):(T50Notify.error("ошибка при обновлении данных клиента"),n.dispatch(e.CLIENT_LOAD_DATA,l.store.getState().client)),[2]}})})},n}(o.default);e.default=u},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(4),i=n(14),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.fastUpdate=function(){i.default.loadByOrderId(),s.default.updateLogs()},e}(s.default);e.default=o},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(18),c=n(2);e.DELIVERY_LOAD_ALL="DELIVERY_LOAD_ALL";var u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadAllByOrderId=function(t){return i(this,void 0,void 0,function(){var r;return o(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","delivery_load",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.DELIVERY_LOAD_ALL,r.data):T50Notify.error("Не найдены данные по доставке"),[2]}})})},n.setValue=function(t,r,a,l){return i(this,void 0,void 0,function(){var i;return o(this,function(o){switch(o.label){case 0:return[4,T50Ajax.postJson("orders.detail","delivery_update",s({order_id:t,basket_id:r,code:a,value:l},c.default.getMultipleUpdateFlag("delivery",a)))];case 1:return(i=o.sent()).result?(n.dispatch(e.DELIVERY_LOAD_ALL,i.data),T50Notify.success("обновлено"),n.fastUpdate()):(T50Notify.error("ошибка при обновлении данных по доставке"),n.dispatch(e.DELIVERY_LOAD_ALL,n.getState().delivery)),[2]}})})},n}(l.default);e.default=u},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(18),c=n(2);e.INSTALLATION_LOAD_ALL="INSTALLATION_LOAD_ALL";var u=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadAll=function(){return i(this,void 0,void 0,function(){var t,r;return o(this,function(a){switch(a.label){case 0:return t=this.getOrderId(),[4,T50Ajax.postJson("orders.detail","installation_load",{order_id:t})];case 1:return(r=a.sent()).result?(n.dispatch(e.INSTALLATION_LOAD_ALL,r.data),[2]):(console.error(r),T50Notify.error("ошибка при загрузке данных по установке"),[2])}})})},n.setValue=function(t,e,n,r){return i(this,void 0,void 0,function(){var a;return o(this,function(s){return a={basket_id:t,id:e,code:n,value:r},[2,this.update(a)]})})},n.setService=function(t,e,n){return i(this,void 0,void 0,function(){var r;return o(this,function(a){return r={basket_id:t,id:e,code:"service",provider:n.provider,value:n.service_id},[2,this.update(r)]})})},n.update=function(t){return i(this,void 0,void 0,function(){var r,a;return o(this,function(i){switch(i.label){case 0:return r=this.getOrderId(),Object.assign(t,s({order_id:r},c.default.getMultipleUpdateFlag("install",t.code))),[4,T50Ajax.postJson("orders.detail","installation_update",t)];case 1:return(a=i.sent()).result?(T50Notify.success("обновлено"),n.loadAll(),n.fastUpdate()):(T50Notify.error("ошибка при обновлении данных по установке"),n.dispatch(e.INSTALLATION_LOAD_ALL,n.getState().installation)),[2,a.result]}})})},n.create=function(t){return i(this,void 0,void 0,function(){var r,a,s,i;return o(this,function(o){switch(o.label){case 0:return r=this.getOrderId(),a=t.provider,s=t.service_id,[4,T50Ajax.postJson("orders.detail","installation_create",{order_id:r,provider:a,service_id:s,product_name:t.custom_input})];case 1:return(i=o.sent()).result?(n.dispatch(e.INSTALLATION_LOAD_ALL,i.data),n.fastUpdate()):T50Notify.error("Ошибка при создании заявки на установку"),[2,i.result]}})})},n.delete=function(t){return i(this,void 0,void 0,function(){var r,a;return o(this,function(s){switch(s.label){case 0:return r=this.getOrderId(),[4,T50Ajax.postJson("orders.detail","installation_delete",{order_id:r,id:t})];case 1:return(a=s.sent()).result?(n.dispatch(e.INSTALLATION_LOAD_ALL,a.data),n.fastUpdate()):T50Notify.error("Ошибка при удалении заявки на установку"),[2,a.result]}})})},n.sentToRemcity=function(){return i(this,void 0,void 0,function(){var t,r;return o(this,function(a){switch(a.label){case 0:return t=this.getOrderId(),[4,T50Ajax.postJson("orders.detail","sent_remcity",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.INSTALLATION_LOAD_ALL,r.data):T50Notify.error("Ошибка при отправке заявки в remcity.net"),[2,r.result]}})})},n}(l.default);e.default=u},function(t,e,n){"use strict";(function(t,r){var a,s=n(32);a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var i=Object(s.a)(a);e.a=i}).call(this,n(34),n(35)(t))},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){}return t.updateStateExcept=function(t,e,n){var a=r({},t);return n.forEach(function(t){a[t]=e[t]}),a},t}();e.default=a},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(4);e.COMMENTS_ALL_DATA="COMMENTS_ALL_DATA",e.COMMENTS_UPDATE="COMMENTS_UPDATE",e.COMMENTS_CHANGE_FILTER="COMMENTS_CHANGE_FILTER",e.COMMENTS_RESET_FILTER="COMMENTS_RESET_FILTER";var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadByFilter=function(t){return i(this,void 0,void 0,function(){var r,a;return o(this,function(i){switch(i.label){case 0:return null==t&&(t={}),r=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","comments_load",s(s({},t),{order_id:r}))];case 1:return a=i.sent(),n.dispatch(e.COMMENTS_ALL_DATA,a.data),[2]}})})},n.changeFilter=function(t,r){var a={};a[t]=r,n.dispatch(e.COMMENTS_CHANGE_FILTER,a)},n.resetFilter=function(){var t={date_from:null,date_to:null,manager:null,theme:null};n.dispatch(e.COMMENTS_RESET_FILTER,t),n.loadByFilter(t)},n.addComment=function(t){return i(this,void 0,void 0,function(){var e,r;return o(this,function(a){switch(a.label){case 0:return e=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","comments_create",s(s({},t),{order_id:e}))];case 1:return r=a.sent(),l.default.showMessage(r,"ошибка при добавлении комменатрия"),r.result&&n.loadByFilter(l.default.getState().comments.filter),[2,r.result]}})})},n.changeItemRemindData=function(t,r){return i(this,void 0,void 0,function(){var a,i;return o(this,function(o){switch(o.label){case 0:return a=n.getOrderId(),null==r&&(r={unset:!0}),[4,T50Ajax.postJson("orders.detail","comments_update",s({order_id:a,id:t},r))];case 1:return i=o.sent(),l.default.showMessage(i,"ошибка при обновлении комменатрия"),i.result&&n.dispatch(e.COMMENTS_UPDATE,i.data),[2,i.result]}})})},n}(l.default);e.default=c},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.DOCS_LOAD_ALL="DOCS_LOAD_ALL",e.DOCS_LOAD_BY_TYPE="DOCS_LOAD_BY_TYPE";var l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadAll=function(t){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","docs_load",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.DOCS_LOAD_ALL,r.data):T50Notify.error("Ошибка при поиске документов"),[2]}})})},n.loadByType=function(t,e){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","docs_load",{order_id:t,type:e})];case 1:return(r=a.sent()).result?n.dispatchByType(e,r.data):T50Notify.error("Ошибка при поиске документов"),[2]}})})},n.submitFormData=function(t){return s(this,void 0,void 0,function(){var e,r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postFormData("orders.detail","upload_doc",t)];case 1:return(e=a.sent()).result?(r=t.get("type"),n.dispatchByType(r,e.data)):T50Notify.error("Ошибка при загрузке документа"),[2]}})})},n.removeFileById=function(t,e,r){return s(this,void 0,void 0,function(){var a;return i(this,function(s){switch(s.label){case 0:return[4,T50Ajax.postJson("orders.detail","delete_doc",{file_id:t,order_id:e,type:r})];case 1:return(a=s.sent()).result?n.dispatchByType(r,a.data):T50Notify.error("Ошибка при удалении документа"),[2]}})})},n.dispatchByType=function(t,r){var a={};a[t]=r,n.dispatch(e.DOCS_LOAD_BY_TYPE,a)},n}(o.default);e.default=l},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.FINE_LOAD_ALL="FINE_LOAD_ALL";var l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.load=function(t){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","fine_load",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.FINE_LOAD_ALL,r.data):T50Notify.error("Не удалось загрузить данные по штрафам."),[2]}})})},n.create=function(t){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","fine_create",{order_id:t})];case 1:return r=a.sent(),o.default.showMessage(r,"Ошибка"),r.result&&n.dispatch(e.FINE_LOAD_ALL,r.data),[2]}})})},n.change=function(t,r,a,l){return s(this,void 0,void 0,function(){var s;return i(this,function(i){switch(i.label){case 0:return[4,T50Ajax.postJson("orders.detail","fine_update",{order_id:t,id:r,code:a,value:l})];case 1:return s=i.sent(),o.default.showMessage(s,"Ошибка"),s.result&&n.dispatch(e.FINE_LOAD_ALL,s.data),[2]}})})},n.delete=function(t,r){return s(this,void 0,void 0,function(){var a;return i(this,function(s){switch(s.label){case 0:return[4,T50Ajax.postJson("orders.detail","fine_delete",{order_id:t,id:r})];case 1:return a=s.sent(),o.default.showMessage(a,"Ошибка"),a.result&&n.dispatch(e.FINE_LOAD_ALL,a.data),[2]}})})},n}(o.default);e.default=l},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(4);e.RECLAMATION_LOAD_ALL="RECLAMATION_LOAD_ALL",e.RECLAMATION_LOAD_FILES="RECLAMATION_LOAD_FILES",e.RECLAMATION_LOAD_COMMENTS="RECLAMATION_LOAD_COMMENTS",e.RECLAMATION_UPDATE_COMMENT="RECLAMATION_UPDATE_COMMENT",e.RECLAMATION_LOAD_SCALAR="RECLAMATION_LOAD_SCALAR";var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadAll=function(){return i(this,void 0,void 0,function(){var t,r;return o(this,function(a){switch(a.label){case 0:return t=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","reclamation_load_all",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.RECLAMATION_LOAD_ALL,r.data):T50Notify.error("Не удалось загрузить данные по рекламации."),[2]}})})},n.update=function(t,r){return i(this,void 0,void 0,function(){var a,s;return o(this,function(i){switch(i.label){case 0:return a=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","reclamation_update",{order_id:a,code:t,value:r})];case 1:return s=i.sent(),n.showMessage(s,"Ошибка"),s.result&&n.dispatch(e.RECLAMATION_LOAD_SCALAR,s.data),[2]}})})},n.saveFile=function(t){return i(this,void 0,void 0,function(){var r;return o(this,function(a){switch(a.label){case 0:return t.append("order_id",n.getOrderId().toString()),[4,T50Ajax.postFormData("orders.detail","reclamation_save_file",t)];case 1:return(r=a.sent()).result?n.dispatch(e.RECLAMATION_LOAD_FILES,r.data):T50Notify.error("Ошибка при загрузке файла"),[2]}})})},n.removeFile=function(t){return i(this,void 0,void 0,function(){var r,a;return o(this,function(s){switch(s.label){case 0:return r=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","reclamation_delete_file",{file_id:t,order_id:r})];case 1:return(a=s.sent()).result?n.dispatch(e.RECLAMATION_LOAD_FILES,a.data):T50Notify.error("Ошибка при удалении файла"),[2]}})})},n.loadComments=function(){return i(this,void 0,void 0,function(){var t,r;return o(this,function(a){switch(a.label){case 0:return t=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","comments_load",{order_id:t,reclamation:!0})];case 1:return r=a.sent(),n.dispatch(e.RECLAMATION_LOAD_COMMENTS,r.data.items),[2]}})})},n.addComment=function(t){return i(this,void 0,void 0,function(){var r,a;return o(this,function(i){switch(i.label){case 0:return r=n.getOrderId(),[4,T50Ajax.postJson("orders.detail","comments_create",s(s({},t),{order_id:r,reclamation:!0}))];case 1:return a=i.sent(),l.default.showMessage(a,"Ошибка при обновлении хронологии"),a.result&&n.dispatch(e.RECLAMATION_LOAD_COMMENTS,a.data.items),[2,a.result]}})})},n.changeCommentItemRemindData=function(t,r){return i(this,void 0,void 0,function(){var a,i;return o(this,function(o){switch(o.label){case 0:return a=n.getOrderId(),null==r&&(r={unset:!0}),[4,T50Ajax.postJson("orders.detail","comments_update",s(s({order_id:a,id:t},r),{reclamation:!0}))];case 1:return i=o.sent(),l.default.showMessage(i,"Ошибка при обновлении хронологии"),i.result&&n.dispatch(e.RECLAMATION_UPDATE_COMMENT,i.data),[2,i.result]}})})},n}(l.default);e.default=c},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(4);e.ONCE_SUPPLIER_DELIVERY="ONCE_SUPPLIER_DELIVERY",e.ONCE_SUPPLIER_INSTALL="ONCE_SUPPLIER_INSTALL",e.ONCE_SUPPLIER_ACCOUNT="ONCE_SUPPLIER_ACCOUNT";var i=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.switchDelivery=function(t){n.dispatch(e.ONCE_SUPPLIER_DELIVERY,t)},n.switchInstall=function(t){n.dispatch(e.ONCE_SUPPLIER_INSTALL,t)},n.switchAccount=function(t){n.dispatch(e.ONCE_SUPPLIER_ACCOUNT,t)},n}(s.default);e.default=i},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.DEDUCTION_LOAD_TYPES="DEDUCTION_LOAD_TYPES",e.DEDUCTION_LOAD="DEDUCTION_LOAD";var l=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.loadTypes=function(){return s(this,void 0,void 0,function(){var t;return i(this,function(r){switch(r.label){case 0:return[4,T50Ajax.postJson("orders.detail","deduction_load_types",{})];case 1:return(t=r.sent()).result?n.dispatch(e.DEDUCTION_LOAD_TYPES,t.data):T50Notify.error("не определены типы вычетов"),[2]}})})},n.load=function(t){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","deduction_load",{order_id:t})];case 1:return(r=a.sent()).result?n.dispatch(e.DEDUCTION_LOAD,r.data):T50Notify.error("не загружены вычеты"),[2]}})})},n.create=function(t){return s(this,void 0,void 0,function(){var r;return i(this,function(a){switch(a.label){case 0:return[4,T50Ajax.postJson("orders.detail","deduction_create",{order_id:t})];case 1:return r=a.sent(),o.default.showMessage(r,"Ошибка"),r.result&&n.dispatch(e.DEDUCTION_LOAD,r.data),[2]}})})},n.change=function(t,r,a,l){return s(this,void 0,void 0,function(){var s;return i(this,function(i){switch(i.label){case 0:return[4,T50Ajax.postJson("orders.detail","deduction_update",{order_id:t,id:r,code:a,value:l})];case 1:return s=i.sent(),o.default.showMessage(s,"Ошибка"),s.result&&n.dispatch(e.DEDUCTION_LOAD,s.data),[2]}})})},n.delete=function(t,r){return s(this,void 0,void 0,function(){var a;return i(this,function(s){switch(s.label){case 0:return[4,T50Ajax.postJson("orders.detail","deduction_delete",{order_id:t,id:r})];case 1:return a=s.sent(),o.default.showMessage(a,"Ошибка"),a.result&&n.dispatch(e.DEDUCTION_LOAD,a.data),[2]}})})},n}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.isDeepEquals=function(e,n){return null===e==(null===n)&&(typeof e==typeof n&&("object"==typeof e?t.isObjectsEquals(e,n):Array.isArray(e)==Array.isArray(n)&&(Array.isArray(e)?t.isArraysEquals(e,n):e===n)))},t.isObjectsEquals=function(e,n){var r=Object.keys(e).sort(),a=Object.keys(n).sort();return!!t.isArraysEquals(r,a)&&r.every(function(r){var a=e[r],s=n[r];return a===s||t.isDeepEquals(a,s)})},t.isArraysEquals=function(e,n){if(e.length!=n.length)return!1;for(var r=0;r<e.length;r++)if(!t.isDeepEquals(e[r],n[r]))return!1;return!0},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MONTHS={1:"Январь",2:"Февраль",3:"Март",4:"Апрель",5:"Май",6:"Июнь",7:"Июль",8:"Август",9:"Сентябрь",10:"Октябрь",11:"Ноябрь",12:"Декабрь"}},function(t,e,n){!function(t,e){"use strict";var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var a={register:function(t){console.warn("Consumer used without a Provider")},unregister:function(t){},val:function(t){}};function s(t){var e=t.children;return{child:1===e.length?e[0]:null,children:e}}function i(t){return s(t).child||"render"in t&&t.render}var o=1073741823,l=function(){return o},c=0;function u(t,n){var u="_preactContextProvider-"+c++;return{Provider:function(t){function a(e){var r=t.call(this,e)||this;return r.t=function(t,e){var n=[],r=t,a=function(t){return 0|e(r,t)};return{register:function(t){n.push(t),t(r,a(r))},unregister:function(t){n=n.filter(function(e){return e!==t})},val:function(t){if(void 0===t||t==r)return r;var e=a(t);return r=t,n.forEach(function(n){return n(t,e)}),r}}}(e.value,n||l),r}return r(a,t),a.prototype.getChildContext=function(){var t;return(t={})[u]=this.t,t},a.prototype.componentDidUpdate=function(){this.t.val(this.props.value)},a.prototype.render=function(){var t=s(this.props),n=t.child,r=t.children;return n||e.h("span",null,r)},a}(e.Component),Consumer:function(e){function n(n,r){var a=e.call(this,n,r)||this;return a.i=function(t,e){var n=a.props.unstable_observedBits,r=null==n?o:n;0!=((r|=0)&e)&&a.setState({value:t})},a.state={value:a.u().val()||t},a}return r(n,e),n.prototype.componentDidMount=function(){this.u().register(this.i)},n.prototype.shouldComponentUpdate=function(t,e){return this.state.value!==e.value||i(this.props)!==i(t)},n.prototype.componentWillUnmount=function(){this.u().unregister(this.i)},n.prototype.componentDidUpdate=function(t,e,n){var r=n[u];r!==this.context[u]&&((r||a).unregister(this.i),this.componentDidMount())},n.prototype.render=function(){var t="render"in this.props&&this.props.render,e=i(this.props);if(t&&t!==e&&console.warn("Both children and a render function are defined. Children will be used"),"function"==typeof e)return e(this.state.value);console.warn("Consumer is expecting a function as one and only child but didn't find any")},n.prototype.u=function(){return this.context[u]||a},n}(e.Component)}}var d=u;t.default=u,t.createContext=d,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(0))},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",function(){return r})},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(1),o=n(10),l=n(50),c=n(6),u=n(51),d=n(55),_=n(57),f=n(60),h=n(61),p=n(63),v=n(64),b=n(65),m=n(66),y=n(67),g=n(69),O=n(71),w=n(72),A=n(73),k=n(12);$(document).ready(function(){r(void 0,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return[4,c.default.loadStatic()];case 1:return t.sent(),[4,c.default.loadOrder()];case 2:return t.sent(),[4,c.default.loadAllPrices()];case 3:return t.sent(),k.default.loadAll(),c.default.updateLogs(),[2]}})}),s.render(s.h(i.Provider,{store:o.store},s.h(m.default,null)),document.getElementById("react_header")),s.render(s.h(i.Provider,{store:o.store},s.h(w.default,null)),document.getElementById("react_statistic")),s.render(s.h(i.Provider,{store:o.store},s.h(u.default,null)),document.getElementById("react_basket")),s.render(s.h(i.Provider,{store:o.store},s.h(d.default,null)),document.getElementById("react_accounts")),s.render(s.h(i.Provider,{store:o.store},s.h(_.default,null)),document.getElementById("react_client")),s.render(s.h(i.Provider,{store:o.store},s.h(f.default,null)),document.getElementById("react_comments")),s.render(s.h(i.Provider,{store:o.store},s.h(h.default,null)),document.getElementById("react_delivery")),s.render(s.h(i.Provider,{store:o.store},s.h(p.default,null)),document.getElementById("react_docs")),s.render(s.h(i.Provider,{store:o.store},s.h(v.default,null)),document.getElementById("react_fine")),s.render(s.h(i.Provider,{store:o.store},s.h(b.default,null)),document.getElementById("react_deduction")),s.render(s.h(i.Provider,{store:o.store},s.h(y.default,null)),document.getElementById("react_installation")),s.render(s.h(i.Provider,{store:o.store},s.h(g.default,null)),document.getElementById("react_profit")),s.render(s.h(i.Provider,{store:o.store},s.h(O.default,null)),document.getElementById("react_reclamation")),s.render(s.h(i.Provider,{store:o.store},s.h(A.default,{block:"accounts"})),document.getElementById("react_accounts__flag_one_supplier")),s.render(s.h(i.Provider,{store:o.store},s.h(A.default,{block:"delivery"})),document.getElementById("react_delivery__flag_one_supplier")),s.render(s.h(i.Provider,{store:o.store},s.h(A.default,{block:"install"})),document.getElementById("react_installation__flag_one_supplier"))}),e.default=l.default},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(16),a=n(37),s=n(38),i=n(39),o=n(40),l=n(41),c=n(42),u=n(43),d=n(44),_=n(45),f=n(46),h=n(47),p=n(48),v=n(49);e.RootReducer=r.combineReducers({order:a.default,accounts:s.default,basket:i.default,client:o.default,comments:l.default,delivery:c.default,docs:u.default,fine:d.default,installation:_.default,profit:f.default,reclamation:h.default,once_supplier:p.default,deduction:v.default})},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var s=arguments[e],i=0,o=s.length;i<o;i++,a++)r[a]=s[i];return r};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),i=n(22),o={is_test:!1,shop:null,order_id:s.default.getOrderId(),remote_order_id:null,manager:null,source:null,status:null,city:null,dateCreate:null,agreed_client:!1,agreed_supplier:!1,currentManager:null,share_com_manager:null,date_invoice:null,managers:[],statuses:[],sources:[],deliveryConditions:[],installationProviders:[],suppliers:[],cities:[]},l=["managers","statuses","sources","deliveryConditions","installationProviders","suppliers","cities"];e.default=function(t,e){switch(void 0===t&&(t=o),e.type){case s.ORDER_LOAD_STATISTIC:var n=r({},t);return l.forEach(function(t){return n[t]=e.payload[t]}),n;case s.ORDER_LOAD_DINAMIC:return i.default.updateStateExcept(e.payload,t,a(l,["order_id"]));case s.ORDER_CHANGE_SHARE_MANAGER:return r(r({},t),{share_com_manager:e.payload})}return t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),s={items:[]};e.default=function(t,e){switch(void 0===t&&(t=s),e.type){case a.ACCOUNT_LOAD_ITEMS:return r(r({},t),{items:e.payload});case a.ACCOUNT_LOAD_ITEM:return i(t,e.payload)}return t};var i=function(t,e){var n=t.items.map(function(t){return t.id==e.id?e:t});return r(r({},t),{items:n})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13),a={items:[],sale_sum:0,purchase_sum:0,commission_sum:0,pay_types:[]};e.default=function(t,e){switch(void 0===t&&(t=a),e.type){case r.BASKET_LOAD_ALL:return e.payload}return t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(17),s={id:0,fio:"",fio_dop:"",phone:"",phone_dop:"",email:"",is_entity:!1,requisites:"",city:"",street:"",house_number:"",porch:"",floor:"",apartment:"",intercom:"",elevator:"",send_email:!1};e.default=function(t,e){switch(void 0===t&&(t=s),e.type){case a.CLIENT_LOAD_DATA:return e.payload;case a.CLIENT_SEND_EMAIL:return r(r({},t),{send_email:e.payload})}return t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(23),s={items:[],themes:[],filter:{date_from:null,date_to:null,manager:null,theme:null}};e.default=function(t,e){switch(void 0===t&&(t=s),e.type){case a.COMMENTS_ALL_DATA:return r(r({},t),{items:e.payload.items,themes:e.payload.themes});case a.COMMENTS_UPDATE:return r(r({},t),{items:t.items.map(function(t){return t.id==e.payload.id?e.payload:t})});case a.COMMENTS_RESET_FILTER:return r(r({},t),{filter:e.payload});case a.COMMENTS_CHANGE_FILTER:var n=r({},t.filter);return Object.assign(n,e.payload),r(r({},t),{filter:n})}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),a={items:[],price_client:0,price_shop:0};e.default=function(t,e){switch(void 0===t&&(t=a),e.type){case r.DELIVERY_LOAD_ALL:return e.payload}return t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(24),s={company_card:[],our_prepayment_invoice:[],partners_prepayment_invoice:[],proxy_shipment_tk:[],contract:[],purchase_order:[],proxy_receipt_goods:[]};e.default=function(t,e){switch(void 0===t&&(t=s),e.type){case a.DOCS_LOAD_ALL:return e.payload;case a.DOCS_LOAD_BY_TYPE:var n=r({},t);return Object.assign(n,e.payload),n}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25),a={items:[]};e.default=function(t,e){switch(void 0===t&&(t=a),e.type){case r.FINE_LOAD_ALL:return{items:e.payload}}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(20),a={items:[],price_client:null,price_shop:null,remcityOrderNum:null};e.default=function(t,e){switch(void 0===t&&(t=a),e.type){case r.INSTALLATION_LOAD_ALL:return e.payload}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),a={basket_sum:{sale:null,purchase:null,logistics:null,commission:null,suppl_commission:null,diff:null},instal_sum:{sale:null,purchase:null,master:null,logistics:null,commission:null,suppl_commission:null,diff:null},basket_items:[],instal_items:[],full_commission:null,delivery_date:null};e.default=function(t,e){return void 0===t&&(t=a),e.type==r.PROFIT_LOAD_ALL?e.payload:t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(26),s=n(22),i={files:[],description:null,requirement:null,requirements:[],reason:null,reasons:[],error:null,errors:[],result:null,results:[],date_request:null,date_finish:null,date_start:null,manager:null,comments:[]};e.default=function(t,e){switch(void 0===t&&(t=i),e.type){case a.RECLAMATION_LOAD_ALL:return r(r({},e.payload),{comments:t.comments});case a.RECLAMATION_LOAD_FILES:return r(r({},t),{files:e.payload});case a.RECLAMATION_LOAD_COMMENTS:return r(r({},t),{comments:e.payload});case a.RECLAMATION_UPDATE_COMMENT:return r(r({},t),{comments:t.comments.map(function(t){return t.id==e.payload.id?e.payload:t})});case a.RECLAMATION_LOAD_SCALAR:return s.default.updateStateExcept(e.payload,t,["files","requirements","reasons","results","errors","comments"])}return t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(27),s={delivery:!1,accounts:!1,install:!1};e.default=function(t,e){switch(void 0===t&&(t=s),e.type){case a.ONCE_SUPPLIER_DELIVERY:return r(r({},t),{delivery:e.payload});case a.ONCE_SUPPLIER_ACCOUNT:return r(r({},t),{accounts:e.payload});case a.ONCE_SUPPLIER_INSTALL:return r(r({},t),{install:e.payload})}return t}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(28),s={items:[],types:[]};e.default=function(t,e){switch(void 0===t&&(t=s),e.type){case a.DEDUCTION_LOAD:return r(r({},t),{items:e.payload});case a.DEDUCTION_LOAD_TYPES:return r(r({},t),{types:e.payload})}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={}},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),l=n(1),c=n(7),u=n(3),d=n(8),_=n(53),f=n(9),h=n(5),p=n(54),v=n(13),b=n(6),m=n(2),y=function(t){function e(e){var n=t.call(this,e)||this;return n.tabls=!1,n.tabls=!!$(".tabs").length,T50PubSub.subscribe("load_products",function(t){return s(n,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return n=(e=$("#ajax_basket_load_products")).html,[4,t];case 1:return n.apply(e,[r.sent()]),$("#ajax_basket_load_products").slideDown(350),[2]}})})}),T50PubSub.subscribe("select_product_for_basket",function(t){v.default.create(n.props.order_id,t.product_price_id,t.exchange_basket_id),$("#ajax_basket_load_products").slideUp(350)}),T50PubSub.subscribeMany("manual_modal_submit",function(t){return s(n,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return t.modal_key.includes("basket")?[4,v.default.setManual(this.props.order_id,t.bind_id,t.value,t.comment,t.modal_key)]:[2];case 1:return e.sent()&&$.fancybox.close(),[2]}})})}),n}return a(e,t),e.prototype.componentDidUpdate=function(){t.prototype.componentDidUpdate.call(this),this.jqueryUpdate=!1},e.prototype.loadProducts=function(t){void 0===t&&(t=0);var e={};t>0&&(e.exchange_basket_id=t),T50PubSub.send("load_products",T50Ajax.postHtml("catalog.default","load_products",e))},e.prototype.changeQuantity=function(t,e){v.default.setValue(this.props.order_id,t.id,"quantity",e)},e.prototype.changePayType=function(t,e){v.default.setValue(this.props.order_id,t.id,"pay_type",e.val)},e.prototype.setClaim=function(t,e){return s(this,void 0,void 0,function(){return i(this,function(n){switch(n.label){case 0:return 0!=e||confirm("Снять с рекламации?\nЗаменяющий товар будет удален со всеми данными.")?[4,v.default.setValue(this.props.order_id,t.id,"claim",e?1:0,!0)]:[2,!1];case 1:return[2,n.sent()]}})})},e.prototype.setOrderFlags=function(t,e){b.default.setValue(t,e?1:0)},e.prototype.delete=function(t){confirm('Удалить товар "'+t.title+'"?')&&v.default.delete(this.props.order_id,t.id)},e.prototype.getProductName=function(t){return null==t.url?t.title:o.h("a",{class:"link link_styel_classic",target:"_blank",href:t.url},t.title)},e.prototype.getBasketItems=function(){var t=this;return this.props.items.map(function(e){var n,r,a="table__tr";return e.claim&&(a+=" table__tr_state_disabled"),e.claim_replace&&(a+=" table__tr_style_marked"),o.h("tr",{class:a},o.h("td",{class:"table__td"},o.h("div",{class:"table__td-disabled"},t.getProductName(e))),o.h("td",{class:"table__td"},o.h("div",{class:"table__td-disabled"},o.h(_.default,{value:e.quantity,min:1,onChange:t.changeQuantity.bind(t,e)}))),o.h("td",{class:"table__td"},o.h("div",{class:"table__td-disabled"},o.h("div",{class:"form__field form__field_size-m_s"},m.default.getSelectItem(e.supplier_id,t.props.suppliers)))),o.h("td",{class:"table__td"},o.h(p.default,{isManual:e.is_manual_sale,value:e.sale,comment:null===(n=e.comments)||void 0===n?void 0:n.sale,manualKey:"basket_sale",id:e.id,order_id:t.props.order_id})),o.h("td",{class:"table__td"},o.h(p.default,{isManual:e.is_manual_purchase,value:e.purchase,comment:null===(r=e.comments)||void 0===r?void 0:r.purchase,manualKey:"basket_purchase",id:e.id,order_id:t.props.order_id})),o.h("td",{class:"table__td"},o.h("div",{class:"table__td-disabled"},f.default.fnum(e.commission))),o.h("td",{class:"table__td"},o.h("div",{class:"table__td-disabled"},o.h("div",{class:"form__field form__field_size-xl_m"+(e.claim_replace?" order__top-connect":"")},o.h(h.default,{key:h.default.key(),items:t.props.pay_types,onSelect:t.changePayType.bind(t,e),value:e.pay_type,class:"js-select form__select"})))),e.claim?o.h("td",{class:"table__td table__not-disabled"},o.h("div",{class:"form__field form__field_size-xl_m"},o.h("div",{class:"form__item"},o.h(d.default,{checked:!0,onClick:t.setClaim.bind(t,e),awaitConfirm:!0})),o.h("div",{class:"form__item pd-group"},o.h("button",{class:"button",type:"button",onClick:t.loadProducts.bind(t,e.id)},"Добавить замену")))):o.h("td",{class:"table__td"},o.h("div",{class:"form__field form__field_size-xl_xs"},o.h(d.default,{onClick:t.setClaim.bind(t,e)}))),o.h("td",{class:"table__td table__td_align_right"},o.h("div",{class:"table__td-disabled"},o.h("div",{class:"link link_icon_big",onClick:t.delete.bind(t,e)},o.h(c.default,{name:"icon_delete",class:"link__icon"})," "))))})},e.prototype.render=function(){return o.h("div",null,o.h("div",{class:"form__section"},o.h("span",{class:"panel__label panel__label_size_big"},"Согласование:"),o.h("div",{class:"form__item"},o.h(d.default,{checked:this.props.agreed_client,text:"Согласовано клиент",onClick:this.setOrderFlags.bind(this,"agreed_client")})),o.h("div",{class:"form__item"},o.h(d.default,{checked:this.props.agreed_supplier,text:"Согласовано поставщик",onClick:this.setOrderFlags.bind(this,"agreed_supplier")}))),o.h("span",{class:"panel__title "+(this.tabls?"panel_type_subtitle":"panel__title_type_subtitle")},"Состав заказа"),o.h("div",{class:"table form"},o.h("table",{class:"table__main"},o.h("thead",{class:"table__thead"},o.h("tr",{class:"table__tr"},o.h("th",{class:"table__th"},"Наименование"),o.h("th",{class:"table__th"},"Количество"),o.h("th",{class:"table__th"},"Поставщик"),o.h("th",{class:"table__th"},"Цена продажи"),o.h("th",{class:"table__th"},"Цена закупки"),o.h("th",{class:"table__th"},"Комиссия"),o.h("th",{class:"table__th"},"Способ оплаты"),o.h("th",{class:"table__th"},"Рекламация"),o.h("th",{class:"table__th"}," "))),o.h("tbody",{class:"table__tbody"},this.getBasketItems()),o.h("tfoot",{class:"table__tfoot"},o.h("tr",{class:"table__tr table__tr_style_ninja"},o.h("th",{class:"table__td"},o.h("div",{class:"table__marked"},"Итого:")),o.h("th",{class:"table__td"}," "),o.h("th",{class:"table__td"}," "),o.h("th",{class:"table__td"},o.h("div",{class:"marked status_failed"},f.default.fnum(this.props.basket_sale_sum))),o.h("th",{class:"table__td"},o.h("div",{class:"marked status_failed"},f.default.fnum(this.props.basket_purchase_sum))),o.h("th",{class:"table__td"},o.h("div",{class:"marked status_failed"},f.default.fnum(this.props.basket_commission_sum))),o.h("th",{class:"table__td"},"  "),o.h("th",{class:"table__td"},"  "),o.h("th",{class:"table__td"}," "))))),o.h("div",{class:"panel__foot panel__foot_type_full pd-group"},o.h("div",{class:"panel__main"},o.h("button",{class:"button",type:"button",onClick:this.loadProducts.bind(this)},"Добавить к заказу")),o.h("div",{class:"panel__addition"},o.h("a",{class:"js-modal link link_icon_big link_type_ninja link_icon_marked",href:"#email_editor","data-email_type":"*","data-order_id":this.props.order_id},o.h(c.default,{name:"icon_e-mail",class:"link__icon"}),"Отправить на почту поставщику"))))},e}(u.default);e.default=l.connect(function(t){return{agreed_client:t.order.agreed_client,agreed_supplier:t.order.agreed_supplier,items:t.basket.items,pay_types:t.basket.pay_types,basket_sale_sum:t.basket.sale_sum,basket_purchase_sum:t.basket.purchase_sum,basket_commission_sum:t.basket.commission_sum,order_id:t.order.order_id,suppliers:t.order.suppliers}})(y)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.select=function(t){$(t).find(".js-select:visible").select2({minimumResultsForSearch:-1})},t.modal=function(){$(".js-modal").fancybox({afterShow:function(){t.commonEffectsStack()},afterLoad:function(){this.$content.trigger("modal_loaded",this.opts)},afterClose:function(){this.$content.trigger("modal_close",this.opts)}})},t.tooltip=function(t){try{$(t).find(".js-tooltip").tooltipster("destroy")}catch(t){}$(t).find(".js-tooltip").tooltipster({minWidth:200,contentCloning:!1,trigger:"click",interactive:!0})},t.commonEffectsStack=function(){window.common.jsDate(),window.common.jsTime(),window.common.jsSelectInit()},t}();e.default=r},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:0},n.propsToState(e),n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.propsToState(t)},e.prototype.propsToState=function(t){var e=null!==t.value&&t.value;"string"==typeof e&&(e=parseInt(e)),this.setState({value:e})},e.prototype.onChangeManual=function(t){var e=t.target;this.setValue(parseInt(e.value))||this.setState({value:this.state.value})},e.prototype.onChange=function(t){var e=this.state.value;e+=t,this.setValue(e)},e.prototype.setValue=function(t){return!isNaN(t)&&(!(t<(null==this.props.min?0:this.props.min))&&(!(null!=this.props.max&&t>this.props.max)&&(this.setState({value:t}),null!=this.props.onChange&&this.props.onChange(t),!0)))},e.prototype.listenerArrows=function(t){var e=0;switch(t.code){case"ArrowUp":e=1;break;case"ArrowDown":e=-1}0!=e&&(t.preventDefault(),this.onChange(e))},e.prototype.render=function(){return s.h("div",{class:"quantity-widget"},s.h("input",{type:"text",value:this.state.value,class:"quantity-widget__input",onKeyDown:this.listenerArrows.bind(this),onInput:this.onChangeManual.bind(this)}),s.h("button",{type:"button",class:"quantity-widget__minus",onClick:this.onChange.bind(this,-1)},"-"),s.h("button",{type:"button",class:"quantity-widget__plus",onClick:this.onChange.bind(this,1)},"+"))},e}(s.Component);e.default=i},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(7),l=n(9),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.render=function(){var t,n,r,a,c="tooltip_nahd_"+ ++e.uniqueId;return i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-l_xs"},i.h("div",{class:"handbrake-group"},i.h("div",{class:"handbrake-group__content"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:l.default.fnum(this.props.value),readOnly:!0,class:"form__input form__input_style_grow"})),this.props.isManual?i.h("div",{class:"handbrake-group__info"},i.h("div",{class:"info-tooltip"},i.h("div",{"data-tooltip-content":"#"+c,class:"info-tooltip__trigger js-tooltip tooltipstered"},i.h(o.default,{name:"icon_info",class:"info-tooltip__icon"})),i.h("div",{id:c,class:"tooltipster__content"},i.h("div",{class:"info-tooltip__title"},null===(t=this.props.comment)||void 0===t?void 0:t.manager),i.h("div",{class:"info-tooltip__title"},"Было: ",null===(n=this.props.comment)||void 0===n?void 0:n.before),i.h("div",{class:"info-tooltip__title"},"Стало: ",this.props.value),i.h("div",{class:"info-tooltip__title"},"Дата изменения: ",null===(r=this.props.comment)||void 0===r?void 0:r.date),i.h("div",{class:"info-tooltip__title"},"Комментарий: ",null===(a=this.props.comment)||void 0===a?void 0:a.comment),i.h("div",{class:"info-tooltip__control"},i.h("a",s({href:"#manual"},this.getLinkAttributes(),{class:"link js-modal"}),"Изменить"))))):null),i.h("div",{class:"handbrake-group__control"},i.h("a",s({href:"#manual"},this.getLinkAttributes(),{class:"handbrake-group__button js-modal"+(this.props.isManual?" handbrake-group__button_state_active":"")}),i.h(o.default,{name:"icon_hand",class:"handbrake-group__icon"}))))))},e.prototype.getLinkAttributes=function(){return{"data-modal_key":this.props.manualKey,"data-order_id":this.props.order_id,"data-bind_id":this.props.id,"data-value":this.props.value}},e.uniqueId=0,e}(i.Component);e.default=c},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),l=n(7),c=n(3),u=n(8),d=n(5),_=n(12),f=n(11),h=n(56),p=n(15),v=n(29);e.MulipleProps=["account_product","date_arrival","account_delivery","official_our","official_partners","account_tn_tk"];var b=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={cnt:{}},e}return a(n,t),n.prototype.componentDidUpdate=function(){t.prototype.componentDidUpdate.call(this),this.jqueryUpdate=!1},n.prototype.componentWillReceiveProps=function(t){var e=this,n={};t.items.forEach(function(t){n[t.id]=e.searchMaxInMultiple(t)}),this.setState({cnt:n})},n.prototype.changeInput=function(t,e,n,r){var a=t[n],s=r.target,i=h.default.setArrayValue(t[n],s.value,e);h.default.isEquals(a,i)||_.default.setValue(this.props.order_id,t.basket_id,n,i)},n.prototype.changeSupplier=function(t,e){_.default.setSupplier(this.props.order_id,t.basket_id,e.val)},n.prototype.changeCheckbox=function(t,e,n){_.default.setValue(this.props.order_id,t.basket_id,e,n)},n.prototype.addRow=function(t){var e=s({},this.state.cnt);e[t]++,this.setState({cnt:e})},n.prototype.deleteRow=function(t,e){confirm("Удалить все данные в строке?")&&_.default.removeRow(this.props.order_id,t.basket_id,e)},n.prototype.searchMaxInMultiple=function(t){var n=e.MulipleProps.map(function(e){return t[e].length}),r=Math.max.apply(null,n);return r||1},n.prototype.prepareItem=function(t){var e,n,r,a,s,o,c=p.default.getById(t.basket_id),_=[],h=this.state.cnt[t.id];0==h&&(h=1);for(var v=0;v<h;v++){var b="table__tr";h>1&&(b+=0==v?" table__tr_type_parent":" table__tr_type_child",v==h-1&&(b+=" table__tr_type_last")),(null===(e=c)||void 0===e?void 0:e.claim)&&(b+=" table__tr_state_disabled"),(null===(n=c)||void 0===n?void 0:n.claim_replace)&&0==v&&(b+=" table__tr_style_marked "),_.push(i.h("tr",{class:b},i.h("td",{class:"table__td"},0==v?i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-xl_l"},i.h("a",{class:"link link_styel_classic",href:null===(r=c)||void 0===r?void 0:r.url},null===(a=c)||void 0===a?void 0:a.title))):" "),i.h("td",{class:"table__td"},0==v?i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_l"},i.h(d.default,{key:d.default.key(),items:this.props.suppliers,value:null===(s=c)||void 0===s?void 0:s.supplier_id,default:{val:0,title:"-"},onSelect:this.changeSupplier.bind(this,t),class:"js-select form__select"}))):" "),i.h("td",{class:"table__td"},0==v?i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:t.account,class:"form__input",onChange:this.changeInput.bind(this,t,v,"account")})))):" "),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:t.account_product[v],class:"form__input",onChange:this.changeInput.bind(this,t,v,"account_product")}))))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"form__item"},i.h(f.default,{type:"date",value:t.date_arrival[v],showIcon:!1,onChange:this.changeInput.bind(this,t,v,"date_arrival")}))))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:t.account_delivery[v],class:"form__input",onChange:this.changeInput.bind(this,t,v,"account_delivery")}))))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:t.official_our[v],class:"form__input",onChange:this.changeInput.bind(this,t,v,"official_our")}))))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:t.official_partners[v],class:"form__input",onChange:this.changeInput.bind(this,t,v,"official_partners")}))))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},i.h("div",{class:"form__item"},i.h("input",{type:"text",value:t.account_tn_tk[v],class:"form__input",onChange:this.changeInput.bind(this,t,v,"account_tn_tk")}))))),i.h("td",{class:"table__td"},0==v?i.h("div",{class:"form__field"},i.h(u.default,{checked:t.in_stock,onClick:this.changeCheckbox.bind(this,t,"in_stock")})):" "),i.h("td",{class:"table__td"},0==v?i.h("div",{class:"form__field "+(null===(o=c)||void 0===o||o.claim_replace,"")},i.h(u.default,{checked:t.shipment,onClick:this.changeCheckbox.bind(this,t,"shipment")})):" "),i.h("td",{class:"table__td table__td_align_right"},0==v?i.h("div",{class:"table__td-disabled"},i.h("div",{class:"link link_icon_big",onClick:this.addRow.bind(this,t.id)},i.h(l.default,{name:"icon_add",class:"link__icon"})," ")):i.h("div",{class:"table__td-disabled"},i.h("div",{class:"link link_icon_big",onClick:this.deleteRow.bind(this,t,v)},i.h(l.default,{name:"icon_delete",class:"link__icon"})," ")))))}return _},n.prototype.shouldComponentUpdate=function(t,e){return!v.default.isDeepEquals(this.props,t)||!v.default.isDeepEquals(this.state,e)},n.prototype.render=function(){return i.h("div",{class:"table",id:"nszTable"},i.h("table",{class:"table__main"},i.h("thead",{class:"table__thead"},i.h("tr",{class:"table__tr"},i.h("th",{class:"table__th"},"Наименование"),i.h("th",{class:"table__th"},"Поставщик"),i.h("th",{class:"table__th"},"Заказ"),i.h("th",{class:"table__th"},"Заказ товара"),i.h("th",{class:"table__th"},"Дата прихода"),i.h("th",{class:"table__th"},"Заказ доставки"),i.h("th",{class:"table__th"},"Счет офиц. наш"),i.h("th",{class:"table__th"},"Счет офиц. партнеров"),i.h("th",{class:"table__th"},"Номер ТН ТК"),i.h("th",{class:"table__th"},"На складе"),i.h("th",{class:"table__th"},"Отгрузка"),i.h("th",{class:"table__th"}," "))),i.h("tbody",{class:"table__tbody"},this.props.items.map(this.prepareItem.bind(this)))))},n}(c.default);e.default=o.connect(function(t){return s(s({},t.accounts),{order_id:t.order.order_id,suppliers:t.order.suppliers})})(b)},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),a=0;for(e=0;e<n;e++)for(var s=arguments[e],i=0,o=s.length;i<o;i++,a++)r[a]=s[i];return r};Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){}return t.setArrayValue=function(t,e,n){if(!Array.isArray(t))return e;for(t=r(t);t.length<n+1;)t.push("");return t[n]=e,t},t.isEquals=function(t,e){var n=Array.isArray(t)?1:0,r=Array.isArray(e)?1:0;if(n^r)return!1;if(!n&&!r)return t===e;if(t.length!=e.length)return!1;for(var a=0;a<t.length;a++)if(t[a]!==e[a])return!1;return!0},t}();e.default=a},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),l=n(7),c=n(3),u=n(58),d=n(17),_=n(9),f=n(5),h=n(2),p=n(59),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentWillMount=function(){T50PubSub.subscribe("mailing_send",function(t){"order_for_client"==t&&d.default.load()})},e.prototype.onChangeInput=function(t,e){var n=e.target;this.changeAll(t,n.value)},e.prototype.setIsEntity=function(t){this.changeAll("is_entity","Y"==t?"1":"0")},e.prototype.setElevator=function(t){this.changeAll("elevator",t)},e.prototype.changeAll=function(t,e){d.default.change(this.props.id,t,e)},e.prototype.getPhoneLabel=function(t,e){if(!this.props.code_msk||!t)return i.h("div",{class:"form__label"},e);var n=""+this.props.code_msk+t.replace("+7","8");return n=n.replace(/[^\d]/g,""),i.h("div",{class:"form__label"},i.h("a",{class:"link link_styel_classic",href:"http://127.0.0.1:4059/switchto?number="+n},e))},e.prototype.getCitySelect=function(){var t=h.default.getSelectItem(this.props.order_city,this.props.cities),e=this.props.city==t?this.props.order_city:null;return i.h(f.default,{onSelect:function(t){d.default.setCity(t.val)},items:this.props.cities,value:e,key:f.default.key(),class:"js-select form__select"})},e.prototype.render=function(){return i.h("div",null,i.h("div",{class:"grid-12__row"},i.h("div",{class:"grid-12__col grid-12__col_size_10"},i.h("div",{class:"table table_style_simple"},i.h("table",{class:"table__main"},i.h("tbody",{class:"table__tbody"},i.h("tr",{class:"table__tr"},i.h("td",{class:"table__td table__td_valign_top"},i.h("label",{class:"form__line order__field order__field_size_xxl"},i.h("div",{class:"form__label"},"ФИО клиента"),i.h("input",{value:this.props.fio,onChange:this.onChangeInput.bind(this,"fio"),class:"form__input"}))),i.h("td",{class:"table__td table__td_valign_top"},i.h("label",{class:"form__line order__field order__field_size_m"},this.getPhoneLabel(this.props.phone,"Телефон (основной)"),i.h(p.default,{value:this.props.phone,onChange:this.changeAll.bind(this,"phone")}))),i.h("td",{class:"table__td table__td_valign_top"},i.h("label",{class:"form__line order__field order__field_size_l"},this.getPhoneLabel(this.props.phone_dop,"Телефон (дополнительный)"),i.h(p.default,{value:this.props.phone_dop,onChange:this.changeAll.bind(this,"phone_dop")}))),i.h("td",{class:"table__td table__td_valign_top"},i.h("label",{class:"form__line order__field order__field_size_l"},i.h("div",{class:"form__label"},"ФИО к доп. телефону"),i.h("input",{value:this.props.fio_dop,onChange:this.onChangeInput.bind(this,"fio_dop"),class:"form__input"}))),i.h("td",{class:"table__td table__td_valign_top"},i.h("label",{class:"form__line order__field order__field_size_l "},i.h("div",{class:"form__label"},"E-mail"),i.h("input",{value:this.props.email,onChange:this.onChangeInput.bind(this,"email"),class:"form__input"}))),i.h("td",{class:"table__td table__td_valign_top"},i.h("label",{class:"form__line order__field form__field form__field_size-m_s"},i.h("div",{class:"form__label"},"Тип клиента"),i.h(u.default,{data:[{value:"Y",title:"Юр. лицо"},{value:"N",title:"Физ. лицо"}],itemClass:"table__item",name:"is_entity",value:this.props.is_entity?"Y":"N",onChange:this.setIsEntity.bind(this)}))))))),i.h("div",{class:"table table_style_simple table_width_auto"},i.h("table",{class:"table__main"},i.h("tbody",{class:"table__tbody"},i.h("tr",{class:"table__tr"},i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_l"},i.h("div",{class:"form__label"},"Город"),this.getCitySelect())),i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_l"},i.h("div",{class:"form__label"},"Улица"),i.h("input",{value:this.props.street,onChange:this.onChangeInput.bind(this,"street"),class:"form__input"}))),i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_xs"},i.h("div",{class:"form__label"},"Дом"),i.h("input",{value:this.props.house_number,onChange:this.onChangeInput.bind(this,"house_number"),class:"form__input"}))),i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_xs"},i.h("div",{class:"form__label"},"Подъезд"),i.h("input",{value:this.props.porch,onChange:this.onChangeInput.bind(this,"porch"),class:"form__input"}))),i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_xs"},i.h("div",{class:"form__label"},"Этаж"),i.h("input",{value:this.props.floor,onChange:this.onChangeInput.bind(this,"floor"),class:"form__input"}))),i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_xs"},i.h("div",{class:"form__label"},"Квартира"),i.h("input",{value:this.props.apartment,onChange:this.onChangeInput.bind(this,"apartment"),class:"form__input"}))),i.h("td",{class:"table__td"},i.h("label",{class:"form__line order__field order__field_size_xs"},i.h("div",{class:"form__label"},"Домофон"),i.h("input",{value:this.props.intercom,onChange:this.onChangeInput.bind(this,"intercom"),class:"form__input"}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__line"},i.h("div",{class:"form__label"},"Лифт"),i.h("div",{class:"table__checks-panel"},i.h("div",{class:"dual-panel"},i.h("div",{class:"dual-panel__row"},i.h(u.default,{data:[{value:"freight",title:"Грузовой"},{value:"passenger",title:"Пассажирский"},{value:"not",title:"Нет"}],itemClass:"dual-panel__col",name:"elevator",value:_.default.alt(this.props.elevator,"not"),onChange:this.setElevator.bind(this)}))))))))))),i.h("div",{class:"grid-12__col grid-12__col_size_2"},i.h("div",{class:"table table_style_simple"},i.h("table",{class:"table__main"},i.h("tbody",{class:"table__tbody"},i.h("td",{class:"table__td table__td_valign_top"},this.props.is_entity?i.h("label",{class:"form__line ur-person"},i.h("div",{class:"form__label"},"Реквизиты"),i.h("textarea",{class:"form__textarea form__textarea_size_regular",value:this.props.requisites,onChange:this.onChangeInput.bind(this,"requisites")})):i.h("label",{class:"form__line fz-person "},i.h("div",{class:"form__label"},"Паспорт (Серия номер)"),i.h("input",{class:"form__input",value:this.props.requisites,onChange:this.onChangeInput.bind(this,"requisites")})))))))),i.h("div",{class:"panel__foot panel__foot_type_full"},i.h("div",{class:"panel__main"},i.h("a",{class:"js-modal link link_type_email "+(this.props.send_email?"link_icon_marked":""),title:this.props.send_email?"отправлено":"",href:"#email_editor","data-email_type":"order_for_client","data-order_id":this.props.order_id},i.h(l.default,{name:"icon_e-mail",class:"link__icon"}),"Отправить на почту клиенту"))))},e}(c.default);e.default=o.connect(function(t){return s(s({},t.client),{code_msk:t.order.phone_code_msk,code_spb:t.order.phone_code_spb,order_id:t.order.order_id,cities:t.order.cities,order_city:t.order.city})})(v)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:null},n.setState({value:n.props.value}),n}return a(e,t),e.prototype.change=function(t){this.setState({value:t.value}),null!=this.props.onChange&&this.props.onChange(t.value)},e.prototype.componentWillReceiveProps=function(t){this.setState({value:t.value})},e.prototype.getItem=function(t){var n=[this.props.name,++e.counter].join("_"),r=t.value==this.state.value;return s.h("div",{class:this.props.itemClass},s.h("div",{class:"check-elem"},s.h("input",{type:"radio",id:n,class:"check-elem__input",checked:r,onClick:this.change.bind(this,t)}),s.h("label",{for:n,class:"check-elem__label"},t.title)))},e.prototype.render=function(){var t=this;return s.h("div",null,this.props.data.map(function(e){return t.getItem(e)}))},e.counter=0,e}(s.Component);e.default=i},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=function(t){function e(e){var n=t.call(this,e)||this;return n.state={value:""},n.propsToState(e),n}return a(e,t),e.prototype.componentWillReceiveProps=function(t){this.propsToState(t)},e.prototype.propsToState=function(t){this.setState({value:t.value})},e.prototype.onInput=function(t){var e=t.target.value;(e=e.replace(/[^+\d]/g,"")).startsWith("+7")&&(e="8"+e.substr(2)),e.length>11&&(e=e.substr(0,11)),this.setState({value:e})},e.prototype.onChange=function(){null!=this.props.onChange&&this.props.onChange(this.state.value)},e.prototype.render=function(){return s.h("input",{value:this.state.value,onInput:this.onInput.bind(this),onChange:this.onChange.bind(this),class:"form__input"})},e}(s.Component);e.default=i},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),l=n(1),c=n(3),u=n(8),d=n(23),_=n(11),f=n(5),h=n(2),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentWillMount=function(){var t=this;T50PubSub.subscribe("comment_modal_submit",function(e){return s(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,d.default.addComment(e)];case 1:return t.sent()&&$.fancybox.close(),[2]}})})}),d.default.loadByFilter(this.props.filter)},e.prototype.changeFilter=function(t,e){var n=e.target;d.default.changeFilter(t,n.value)},e.prototype.changeSelect=function(t,e){d.default.changeFilter(t,e.val)},e.prototype.submitFilter=function(){d.default.loadByFilter(this.props.filter)},e.prototype.resetFilter=function(){d.default.resetFilter()},e.prototype.unsetRemind=function(t,e){0==e&&null!=t.remind_date&&confirm("Отключить напоминание?")&&d.default.changeItemRemindData(t.id,null)},e.prototype.updateRemindData=function(t,e,n){var r=n.target.value;if(0!=r.length){var a={remind_date:t.remind_date,remind_time:t.remind_time};a[e]=r,null!=a.remind_date&&d.default.changeItemRemindData(t.id,a)}},e.prototype.getComment=function(t){var e,n,r=this;return[o.h("div",{class:"table__caption"},o.h("span",{class:"table__marked"},t.manager),o.h("span",{class:"table__reduced table__rt-info"},t.date)),o.h("div",{class:"table table_style_simple table_width_auto"},o.h("table",{class:"table__main"},o.h("tr",{class:"table__tr"},o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"form__field form__field_size-xl_m"},o.h("input",{value:(e=t.theme,null===(n=r.props.themes.find(function(t){return t.val==e}))||void 0===n?void 0:n.title),readOnly:!0,class:"form__input"}))),o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"form__field form__field_size-xxxl_m"},o.h("div",{class:"form__input form__input_type_pseudo form__input_width_auto form__input_style_disabled"},t.target_managers.length?o.h("span",{class:"form__mark"},t.target_managers.map(function(t){return h.default.getManager(t)}).join(", "),", "):null,t.message))),o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"form__field"},o.h(u.default,{checked:t.remind,onClick:this.unsetRemind.bind(this,t),text:"напомнить"}))),o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"dual-panel"},o.h("div",{class:"dual-panel__row"},o.h("div",{class:"dual-panel__col"},o.h("div",{class:"form__field form__field_size-m_s"},o.h(_.default,{type:"date",onChange:this.updateRemindData.bind(this,t,"remind_date"),value:t.remind_date}))),o.h("div",{class:"dual-panel__col"},o.h("div",{class:"form__field form__field_size-s_s"},o.h(_.default,{type:"time",onChange:this.updateRemindData.bind(this,t,"remind_time"),value:t.remind_time})))))))))]},e.prototype.componentDidUpdate=function(){this.jqueryUpdate=!1,t.prototype.componentDidUpdate.call(this)},e.prototype.render=function(){var t=this;return o.h("div",null,o.h("div",{class:"form__section form__section_close_top"},o.h("div",{class:"table table_style_simple table_width_auto"},o.h("table",{class:"table__main"},o.h("tr",{class:"table__tr"},o.h("td",{class:"table__td"},o.h("div",{class:"dual-panel"},o.h("div",{class:"dual-panel__row"},o.h("div",{class:"dual-panel__col"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-m_s"},o.h("div",{class:"form__label"},"Дата"),o.h(_.default,{type:"date",onChange:this.changeFilter.bind(this,"date_from"),value:this.props.filter.date_from}))),o.h("div",{class:"dual-panel__col"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-m_s"},o.h("div",{class:"form__label"}," "),o.h(_.default,{type:"date",onChange:this.changeFilter.bind(this,"date_to"),value:this.props.filter.date_to})))))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_m"},o.h("div",{class:"form__label"},"Менеджер"),o.h(f.default,{key:f.default.key(),items:h.default.getManagersForSelection(),default:{title:"-",val:""},class:"js-select form__select",onSelect:this.changeSelect.bind(this,"manager"),value:this.props.filter.manager}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_m"},o.h("div",{class:"form__label"},"Тема"),o.h(f.default,{key:f.default.key(),items:this.props.themes,class:"js-select form__select",default:{title:"-",val:""},onSelect:this.changeSelect.bind(this,"theme"),value:this.props.filter.theme}))),o.h("td",{class:"table__td"},o.h("div",{class:"form__label"}," "),o.h("button",{class:"button button_style_dark button_type_concrete",type:"button",onClick:this.submitFilter.bind(this)},"Применить фильтр")),o.h("td",{class:"table__td"},o.h("div",{class:"form__label"}," "),o.h("button",{class:"button button_style_default button_type_concrete",type:"button",onClick:this.resetFilter.bind(this)},"Сбросить")))))),this.props.items.map(function(e){return t.getComment(e)}),o.h("div",{class:"panel__foot panel__foot_type_full"},o.h("div",{class:"panel__main"},o.h("a",{class:"button button_type_concrete js-modal",href:"#order_comment"},"Добавить комментарий"))))},e}(c.default);e.default=l.connect(function(t){return t.comments})(p)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),l=n(3),c=n(5),u=n(9),d=n(8),_=n(19),f=n(11),h=n(15),p=n(2),v=n(62),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentWillMount=function(){T50PubSub.subscribe("change_flag_once_supplier__delivery",function(t){console.log("checked",t)})},e.prototype.changeInput=function(t,e,n){var r=n.target;_.default.setValue(this.props.order_id,t.basket_id,e,r.value)},e.prototype.changeSelect=function(t,e,n){var r,a;if("condition"==e){var s=this.props.conditions.find(function(t){return t.val==n.val});if(((null===(r=s)||void 0===r?void 0:r.pickup)||(null===(a=s)||void 0===a?void 0:a.tk))&&!confirm('При установе условия "'+s.title+'" будут сброшены цены. Продолжить?'))return}_.default.setValue(this.props.order_id,t.basket_id,e,n.val)},e.prototype.getItems=function(){var t=this;return this.props.items.map(function(e){var n,r,a,s,o,l,_,b,m,y,g=h.default.getById(e.basket_id),O="table__tr";(null===(n=g)||void 0===n?void 0:n.claim)&&(O+=" table__tr_state_disabled"),(null===(r=g)||void 0===r?void 0:r.claim_replace)&&(O+=" table__tr_style_marked");var w=t.props.conditions.find(function(t){return t.val==e.condition}),A=1==(null===(a=w)||void 0===a?void 0:a.pickup),k=1==(null===(s=w)||void 0===s?void 0:s.tk),x=p.default.indexArrayToSelectItems(e.time_range),C=v.default.getTimeVal(e.time,e.time_range);return i.h("tr",{class:O},i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"order__field order__field_size-z_l"},i.h("a",{class:"link link_styel_classic",href:null===(o=g)||void 0===o?void 0:o.url},null===(l=g)||void 0===l?void 0:l.title)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"order__field_size-z_xs"},p.default.getSelectItem(null===(_=g)||void 0===_?void 0:_.supplier_id,t.props.suppliers)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"order__field_size-z_l"},i.h(c.default,{key:c.default.key(),items:t.props.conditions,onSelect:t.changeSelect.bind(t,e,"condition"),value:null===(b=w)||void 0===b?void 0:b.val,class:"js-select form__select"})))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h(f.default,{type:"date",value:e.date,onChange:t.changeInput.bind(t,e,"date")})))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_l"},i.h(c.default,{key:c.default.key(),items:x,onSelect:t.changeSelect.bind(t,e,"time"),value:C,class:"js-select form__select",default:{val:-1,title:"-",disabled:!1}})))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"line-group"},i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field order__field_size-z_xs"},i.h("input",{value:u.default.fnum(e.cost),class:"form__input",onChange:t.changeInput.bind(t,e,"cost")}))),t.getWhoPaySelect(e,"cost_us",e.cost_us)))),i.h("td",{class:"table__td"},A||k?null:i.h("div",{class:"table__td-disabled"},i.h("div",{class:"line-group"},i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field order__field_size-z_xs"},i.h("input",{value:e.mkad_km,class:"form__input",onChange:t.changeInput.bind(t,e,"mkad_km")}))),i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field order__field_size-z_xs"},i.h("input",{value:e.mkad_price,class:"form__input",onChange:t.changeInput.bind(t,e,"mkad_price")}))),i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field order__field_size-z_xs"},i.h("input",{value:u.default.fnum(e.mkad_sum),readOnly:!0,class:"form__input"}))),t.getWhoPaySelect(e,"mkad_us",e.mkad_us)))),i.h("td",{class:"table__td"},A||k?null:i.h("div",{class:"table__td-disabled"},i.h("div",{class:"line-group"},i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field order__field_size-z_xs"},i.h("input",{value:u.default.fnum(e.vip),class:"form__input",onChange:t.changeInput.bind(t,e,"vip")}))),t.getWhoPaySelect(e,"vip_us",e.vip_us)))),i.h("td",{class:"table__td"},A||k?null:i.h("div",{class:"table__td-disabled"},i.h("div",{class:"line-group"},i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field order__field_size-z_xs"},i.h("input",{value:u.default.fnum(e.lift),class:"form__input",onChange:t.changeInput.bind(t,e,"lift")}))),t.getWhoPaySelect(e,"lift_us",e.lift_us)))),i.h("td",{class:"table__td"},k?null:i.h("div",{class:"table__td-disabled"},i.h("div",{class:"order__field order__field_size-z_m"+(null===(m=g)||void 0===m||m.claim_replace,"")},i.h("input",{value:e.pickup_address,class:"form__input",onChange:t.changeInput.bind(t,e,"pickup_address")})))),i.h("td",{class:"table__td"},i.h(d.default,{checked:null===(y=g)||void 0===y?void 0:y.claim})))})},e.prototype.getWhoPaySelect=function(t,e,n){var r=n?1:0;return i.h("div",{class:"line-group__item"},i.h("div",{class:"order__field_size-z_m"},i.h(c.default,{key:c.default.key(),items:[{val:1,title:"С нас"},{val:0,title:"С клиента"}],onSelect:this.changeSelect.bind(this,t,e),value:r,class:"js-select form__select"})))},e.prototype.render=function(){return i.h("div",null,i.h("div",{class:"table"},i.h("table",{class:"table__main"},i.h("thead",{class:"table__thead"},i.h("tr",{class:"table__tr"},i.h("th",{class:"table__th"},"Наименование"),i.h("th",{class:"table__th"},"Поставщик"),i.h("th",{class:"table__th"},"Условия"),i.h("th",{class:"table__th"},"Дата"),i.h("th",{class:"table__th"},"Время"),i.h("th",{class:"table__th"},"Стоимость"),i.h("th",{class:"table__th"},"За МКАД [Км] [Руб/км]"),i.h("th",{class:"table__th"},"VIP доставка"),i.h("th",{class:"table__th"},"Подъем"),i.h("th",{class:"table__th"},"Адрес самовывоза"),i.h("th",{class:"table__th"},"Рекламация"))),i.h("tbody",{class:"table__tbody"},this.getItems()))),i.h("div",{class:"panel__total"},i.h("div",{class:"form__item"},"Итого с клиента: ",i.h("span",{class:"panel__important"},this.props.price_client)),i.h("div",{class:"form__item"},"Итого с нас: ",i.h("span",{class:"panel__important"},this.props.price_shop))))},e}(l.default);e.default=o.connect(function(t){return s(s({},t.delivery),{order_id:t.order.order_id,conditions:t.order.deliveryConditions,suppliers:t.order.suppliers})})(b)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getTimeVal=function(t,e){for(var n,r=/[^\d]/g,a=0;a<e.length;a++)if(e[a].replace(r,"")==(null===(n=t)||void 0===n?void 0:n.replace(r,"")))return e[a];return null},t}();e.default=r},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),l=n(7),c=n(3),u=n(24),d=n(11),_=n(6),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidMount=function(){var t=this;u.default.loadAll(this.props.order_id),$(this.fileInput).change(function(){var e=new FormData;e.append("file",$(t.fileInput)[0].files[0]),e.append("type",t.fileInput.name),e.append("order_id",t.props.order_id.toString()),u.default.submitFormData(e),t.fileInput.value=""})},e.prototype.removeFile=function(t,e,n){n.preventDefault(),confirm("Удалить файл?")&&u.default.removeFileById(e.id,this.props.order_id,t)},e.prototype.getItems=function(t){var e,n=this;return(null!=(e=this.props[t])?e:[]).map(function(e){return i.h("li",{class:"files-list__item"},i.h("a",{href:e.path,target:"_blank",class:"files-list__link"},e.title),e.can_delete?i.h("a",{href:"#",class:"files-list__remove",onClick:n.removeFile.bind(n,t,e)},i.h(l.default,{name:"icon_delete",class:"files-list__remove-icon"})):null)})},e.prototype.upload=function(t,e){e.preventDefault(),this.fileInput.name=t,$(this.fileInput).trigger("click")},e.prototype.getUploadLink=function(t){return i.h("div",{class:"files-field__controls"},i.h("div",{class:"files-field__control"},i.h("a",{class:"link link_style_default-trigger",href:"#",onClick:this.upload.bind(this,t)},"Загрузить")))},e.prototype.getLinksByTemplate=function(){var t="/orders/"+this.props.order_id+"/docs";return i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Шаблоны"),i.h("div",{class:"doc-group__item"},i.h("a",{class:"link link_style_classic",target:"_blank",href:t+"/invoice/?prepayment=Y"},"Счет на предоплату")),i.h("div",{class:"doc-group__item"},i.h("a",{class:"link link_style_classic",target:"_blank",href:t+"/invoice/"},"Счет на отгрузку")),i.h("div",{class:"doc-group__item"},i.h("a",{class:"link link_style_classic",target:"_blank",href:t+"/offer/"},"Коммерческое предложение")),i.h("div",{class:"doc-group__item"},i.h("a",{class:"link link_style_classic",target:"_blank",href:t+"/client_message/"},"Сообщение покупателю")),this.props.uric?i.h("div",{class:"doc-group__item"},i.h("a",{class:"link link_style_classic",target:"_blank",href:t+"/treaty_legal_persons/"},"Договор для юридических лиц")):i.h("div",{class:"doc-group__item"},i.h("a",{class:"link link_style_classic",target:"_blank",href:t+"/treaty_physical_persons/"},"Договор для физических лиц")))},e.prototype.setDateInvoice=function(t){var e,n=t.target.value;(null===(e=n)||void 0===e?void 0:e.length)&&_.default.setValue("date_invoice",n)},e.prototype.render=function(){var t=this;return i.h("div",{class:"doc-group"},i.h("input",{type:"file",name:"company_card",class:"hidden",ref:function(e){return t.fileInput=e}}),i.h("div",{class:"doc-group__inner"},i.h("div",{class:"doc-group__col"},this.getLinksByTemplate()),i.h("div",{class:"doc-group__col"},i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Карточка предприятия"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("company_card"))),this.getUploadLink("company_card"))),i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Счет на предоплату наш"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("our_prepayment_invoice"))),this.getUploadLink("our_prepayment_invoice"))),i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Счет на предоплату партнеров"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("partners_prepayment_invoice"))),this.getUploadLink("partners_prepayment_invoice")))),i.h("div",{class:"doc-group__col"},i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Доверенность на отгрузку в ТК"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("proxy_shipment_tk"))),this.getUploadLink("proxy_shipment_tk"))),i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Договор"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("contract"))),this.getUploadLink("contract"))),i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Заказ-наряд"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("purchase_order"))),this.getUploadLink("purchase_order")))),i.h("div",{class:"doc-group__col"},i.h("div",{class:"doc-group__group"},i.h("div",{class:"doc-group__label"},"Доверенность на получение груза"),i.h("div",{class:"files-field"},i.h("input",{type:"file",class:"hidden"}),i.h("div",{class:"files-field__list"},i.h("ul",{class:"files-list"},this.getItems("proxy_receipt_goods"))),this.getUploadLink("proxy_receipt_goods")))),i.h("div",{class:"doc-group__col"},i.h("label",{class:"form__line order__field order__field_size_xxl"},i.h("div",{class:"form__label"},"Дата выставления счета"),i.h(d.default,{type:"date",value:this.props.date_invoice,onChange:this.setDateInvoice.bind(this)})))))},e}(c.default);e.default=o.connect(function(t){return s(s({},t.docs),{order_id:t.order.order_id,uric:t.client.is_entity,date_invoice:t.order.date_invoice})})(f)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),l=n(7),c=n(3),u=n(25),d=n(5),_=n(9),f=n(2),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidMount=function(){u.default.load(this.props.order_id)},e.prototype.changeSelect=function(t,e,n){u.default.change(this.props.order_id,e.id,t,n.val)},e.prototype.changeFine=function(t,e){var n=e.target,r=n.value.replace(/\s+/,""),a=parseInt(r);isNaN(a)||a<=0?n.value=_.default.fnum(t.fine):u.default.change(this.props.order_id,t.id,"fine",a)},e.prototype.changeComment=function(t,e){var n=e.target.value;u.default.change(this.props.order_id,t.id,"reason",n)},e.prototype.addRow=function(){u.default.create(this.props.order_id)},e.prototype.remove=function(t){confirm("Удалить штраф?")&&u.default.delete(this.props.order_id,t.id)},e.prototype.getItems=function(){var t=this;return this.props.items.map(function(e){var n=f.default.getManager(e.manager_initiator);return i.h("tr",{class:"table__tr"},i.h("td",{class:"table__td"},i.h("div",{class:"form__item form__field form__field_size-m_s"},i.h("input",{type:"text",value:e.date,readOnly:!0,class:"form__input"}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__item form__field form__field_size-xl_xs"},i.h("input",{type:"text",value:n,readOnly:!0,class:"form__input"}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__item order__field order__field_size-fn_xs"},i.h("input",{type:"text",value:_.default.fnum(e.fine),class:"form__input",onChange:t.changeFine.bind(t,e)}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__item form__field form__field_size-xl_xs"},i.h(d.default,{key:d.default.key(),items:t.props.managers.map(function(t){return{val:t.id,title:t.name}}),default:{title:"-",val:""},class:"js-select form__select",onSelect:t.changeSelect.bind(t,"manager_responsible",e),value:e.manager_responsible}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__item order__field order__field_size-fn_xxxl"},i.h("input",{type:"text",value:e.reason,class:"form__input",onChange:t.changeComment.bind(t,e)}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__item order__field order__field_size-fn_l"},i.h(d.default,{key:d.default.key(),items:_.default.getMonthsArr(),class:"js-select form__select",onSelect:t.changeSelect.bind(t,"month",e),value:e.month}))),i.h("td",{class:"table__td table__td_align_right"},i.h("div",{class:"form__item order__field order__field_size-fn_xs"},i.h("div",{class:"link link_icon_big ",onClick:t.remove.bind(t,e)},i.h(l.default,{name:"icon_delete",class:"link__icon"})," "))))})},e.prototype.render=function(){return i.h("div",null,i.h("div",{class:"table form",id:"fineTable"},i.h("table",{class:"table__main"},i.h("thead",{class:"table__thead"},i.h("tr",{class:"table__tr"},i.h("th",{class:"table__th"},"Дата"),i.h("th",{class:"table__th"},"Инициатор"),i.h("th",{class:"table__th"},"Сумма"),i.h("th",{class:"table__th"},"Ответственный"),i.h("th",{class:"table__th"},"Основние"),i.h("th",{class:"table__th"},"Месяц ЗП"),i.h("th",{class:"table__th"}," "))),i.h("tbody",{class:"table__tbody"},this.getItems()))),i.h("div",{class:"panel__foot panel__foot_type_full"},i.h("div",{class:"panel__main"},i.h("button",{class:"button button_type_concrete",type:"button",onClick:this.addRow.bind(this)},"Добавить штраф"))))},e}(c.default);e.default=o.connect(function(t){return s(s({},t.fine),{currentManager:t.order.currentManager,order_id:t.order.order_id,managers:t.order.managers})})(h)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),c=n(1),u=n(7),d=n(3),_=n(28),f=n(5),h=n(9),p=n(2),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidMount=function(){return i(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:return[4,_.default.loadTypes()];case 1:return t.sent(),_.default.load(this.props.order_id),[2]}})})},e.prototype.changeType=function(t,e){_.default.change(this.props.order_id,t.id,"type",e.val)},e.prototype.changeDeduction=function(t,e){var n=e.target,r=n.value.replace(/\s+/,""),a=parseInt(r);isNaN(a)||a<=0?n.value=h.default.fnum(t.deduction):_.default.change(this.props.order_id,t.id,"deduction",a)},e.prototype.changeComment=function(t,e){var n=e.target.value;_.default.change(this.props.order_id,t.id,"comment",n)},e.prototype.addRow=function(){_.default.create(this.props.order_id)},e.prototype.remove=function(t){confirm("Удалить вычет?")&&_.default.delete(this.props.order_id,t.id)},e.prototype.getItems=function(){var t=this;return this.props.items.map(function(e){var n=p.default.getManager(e.manager);return l.h("tr",{class:"table__tr"},l.h("td",{class:"table__td"},l.h("div",{class:"form__item form__field form__field_size-m_s"},l.h("input",{type:"text",value:e.date,readOnly:!0,class:"form__input"}))),l.h("td",{class:"table__td"},l.h("div",{class:"form__item form__field form__field_size-xl_xs"},l.h("input",{type:"text",value:n,readOnly:!0,class:"form__input"}))),l.h("td",{class:"table__td"},l.h("div",{class:"form__item order__field order__field_size-fn_xs"},l.h("input",{type:"text",value:h.default.fnum(e.deduction),class:"form__input",onChange:t.changeDeduction.bind(t,e)}))),l.h("td",{class:"table__td"},l.h("div",{class:"form__item form__field form__field_size-xl_xs"},l.h(f.default,{key:f.default.key(),items:t.props.types,class:"js-select form__select",onSelect:t.changeType.bind(t,e),value:e.type}))),l.h("td",{class:"table__td"},l.h("div",{class:"form__item order__field order__field_size-fn_xxxl"},l.h("input",{type:"text",value:e.comment,class:"form__input",onChange:t.changeComment.bind(t,e)}))),l.h("td",{class:"table__td table__td_align_right"},l.h("div",{class:"form__item order__field order__field_size-fn_xs"},l.h("div",{class:"link link_icon_big ",onClick:t.remove.bind(t,e)},l.h(u.default,{name:"icon_delete",class:"link__icon"})," "))))})},e.prototype.render=function(){return l.h("div",null,l.h("div",{class:"table form",id:"fineTable"},l.h("table",{class:"table__main"},l.h("thead",{class:"table__thead"},l.h("tr",{class:"table__tr"},l.h("th",{class:"table__th"},"Дата"),l.h("th",{class:"table__th"},"Менеджер"),l.h("th",{class:"table__th"},"Сумма"),l.h("th",{class:"table__th"},"Тип"),l.h("th",{class:"table__th"},"Комментарий"),l.h("th",{class:"table__th"}," "))),l.h("tbody",{class:"table__tbody"},this.getItems()))),l.h("div",{class:"panel__foot panel__foot_type_full"},l.h("div",{class:"panel__main"},l.h("button",{class:"button button_type_concrete",type:"button",onClick:this.addRow.bind(this)},"Добавить вычет"))))},e}(d.default);e.default=c.connect(function(t){return s(s({},t.deduction),{currentManager:t.order.currentManager,order_id:t.order.order_id,managers:t.order.managers})})(v)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(1),o=n(3),l=n(8),c=n(15),u=n(6),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.switchTestFlag=function(t){u.default.setValue("is_test",t?1:0)},e.prototype.render=function(){var t=this.props,e=t.orderId,n=t.is_test;return s.h("div",{class:"panel__head"},s.h("div",{class:"panel__head-main"},s.h("h2",{class:"panel__title"},"Заказ #",e,s.h("span",{class:"panel__head-minor"},this.props.has_claim?"(в рекламации)":""),s.h("span",{class:"panel__head-check"},s.h(l.default,{checked:n,text:"Тестовый",onClick:this.switchTestFlag.bind(this)})))),s.h("div",{class:"panel__head-controls"},s.h("a",{class:"link link_style_marked js-modal","data-type":"inline",href:"#order_view"},"Редактировать вид")))},e}(o.default);e.default=i.connect(function(t){return{orderId:t.order.order_id,is_test:t.order.is_test,has_claim:c.default.hasClaim()}})(d)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(0),c=n(1),u=n(7),d=n(3),_=n(8),f=n(5),h=n(11),p=n(20),v=n(15),b=n(68),m=n(2),y=n(9),g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentWillMount=function(){var t=this;T50PubSub.subscribe("select_installation_service",function(e){return i(t,void 0,void 0,function(){var t,n;return o(this,function(r){switch(r.label){case 0:return t=!1,e.installation_id>0?(n=b.default.getBasketId(e.installation_id,this.props.items),[4,p.default.setService(n,e.installation_id,e)]):[3,2];case 1:return t=r.sent(),[3,4];case 2:return[4,p.default.create(e)];case 3:t=r.sent(),r.label=4;case 4:return t&&$.fancybox.close(),[2]}})})})},e.prototype.componentDidUpdate=function(){t.prototype.componentDidUpdate.call(this),this.jqueryUpdate=!1},e.prototype.changeInput=function(t,e,n){var r=n.target;p.default.setValue(t.basket_id,t.id,e,r.value)},e.prototype.changeSelect=function(t,e,n){p.default.setValue(t.basket_id,t.id,e,n.val)},e.prototype.delete=function(t){confirm("Удалить заявку?")&&p.default.delete(t.id)},e.prototype.sentToRemcity=function(){confirm("Отправить заявку в remcity.net?\nПозиции с поставщиком РемСити будут заблокированы.")&&p.default.sentToRemcity()},e.prototype.getItems=function(){var t=this;return this.props.items.map(function(e){var n,r,a,s,i,o,c,d=v.default.getById(e.basket_id),p="table__tr";((null===(n=d)||void 0===n?void 0:n.claim)||!e.can_change)&&(p+=" table__tr_state_disabled"),(null===(r=d)||void 0===r?void 0:r.claim_replace)&&(p+=" table__tr_style_marked");var b=null!=e.product_name&&e.product_name.length>0?e.product_name:null===(a=d)||void 0===a?void 0:a.title;return l.h("tr",{class:p},l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_l"},l.h("a",{class:"link link_styel_classic",href:null===(s=d)||void 0===s?void 0:s.url},b)))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_l"},l.h(f.default,{key:f.default.key(),items:[{val:"installation",title:"Установка"},{val:"repair",title:"Ремонт"}],onSelect:t.changeSelect.bind(t,e,"type"),value:e.type,class:"js-select form__select"})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field_size-z_l"},l.h("a",{class:"link link_styel_classic js-modal","data-provider":e.provider,"data-service_id":e.service_id,"data-installation_id":e.id,href:"#installation_prices"},null!=(i=m.default.getSelectItem(e.provider,t.props.providers))?i:"-")))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"form__field form__field_size-m_s"},l.h(h.default,{type:"date",onChange:t.changeInput.bind(t,e,"date"),value:e.date})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_s"},l.h("input",{class:"form__input",value:e.sale,onChange:t.changeInput.bind(t,e,"sale")})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_s"},l.h("input",{class:"form__input",value:e.purchase,onChange:t.changeInput.bind(t,e,"purchase")})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field_size-z_s"},t.getWhoPaySelect(e,"costs_us",e.costs_us)))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_xs"},l.h("input",{value:e.visit_master_price,onChange:t.changeInput.bind(t,e,"visit_master_price"),class:"form__input"})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_xs"},l.h("input",{value:e.visit_master_km,onChange:t.changeInput.bind(t,e,"visit_master_km"),class:"form__input"})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_xs"},l.h("input",{value:e.visit_master_km_price,onChange:t.changeInput.bind(t,e,"visit_master_km_price"),class:"form__input"})))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"line-group"},l.h("div",{class:"line-group__item"},l.h("div",{class:"order__field order__field_size-z_xs"},l.h("input",{value:e.visit_master_sum,readOnly:!0,class:"form__input"}))),t.getWhoPaySelect(e,"visit_master_us",e.visit_master_us)))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_xs"},e.commission))),l.h("td",{class:"table__td"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"order__field order__field_size-z_l"+(null===(o=d)||void 0===o||o.claim_replace,"")},l.h("input",{value:e.comment,onChange:t.changeInput.bind(t,e,"comment"),class:"form__input"})))),l.h("td",{class:"table__td"},l.h(_.default,{checked:null===(c=d)||void 0===c?void 0:c.claim})),l.h("td",{class:"table__td table__td_align_right"},l.h("div",{class:"table__td-disabled"},l.h("div",{class:"link link_icon_big",onClick:t.delete.bind(t,e)},l.h(u.default,{name:"icon_delete",class:"link__icon"})," "))))})},e.prototype.getWhoPaySelect=function(t,e,n){var r=n?1:0;return l.h("div",{class:"line-group__item"},l.h("div",{class:"order__field_size-z_s"},l.h(f.default,{items:[{val:1,title:"С нас"},{val:0,title:"С клиента"}],onSelect:this.changeSelect.bind(this,t,e),value:r,class:"js-select form__select"})))},e.prototype.render=function(){return l.h("div",null,l.h("div",{class:"table"},l.h("table",{class:"table__main"},l.h("thead",{class:"table__thead"},l.h("tr",{class:"table__tr"},l.h("th",{class:"table__th"},"Наименование"),l.h("th",{class:"table__th"},"Тип"),l.h("th",{class:"table__th"},"Поставщик"),l.h("th",{class:"table__th"},"Дата"),l.h("th",{class:"table__th"},"Цена продажи"),l.h("th",{class:"table__th"},"Цена закупки"),l.h("th",{class:"table__th"},"Условия"),l.h("th",{class:"table__th"},"Выезд мастера"),l.h("th",{class:"table__th"},"Км."),l.h("th",{class:"table__th"},"Руб./км."),l.h("th",{class:"table__th"},"Сумма"),l.h("th",{class:"table__th"},"Комиссия"),l.h("th",{class:"table__th"},"Комментарий"),l.h("th",{class:"table__th"},"Рекламация"),l.h("th",{class:"table__th"}," "))),l.h("tbody",{class:"table__tbody"},this.getItems()))),l.h("div",{class:"panel__total panel__total_space_bottom"},l.h("div",{class:"form__item"},"Итого с клиента: ",l.h("span",{class:"panel__important"},this.props.price_client)),l.h("div",{class:"form__item"},"Итого с нас: ",l.h("span",{class:"panel__important"},this.props.price_shop)),l.h("div",{class:"form__item pd-group"},l.h("button",{class:"button js-modal","data-custom_input":"Y",href:"#installation_prices",type:"button"},"Добавить товар")),this.props.remcityOrderNum>0?l.h("div",{class:"form__item"},"Номер РемСити: ",l.h("span",{class:"panel__important"},this.props.remcityOrderNum)):l.h("div",{class:"form__item pd-group"},l.h("button",{class:"button button_style_dark",type:"button",onClick:this.sentToRemcity.bind(this),disabled:y.default.isEmptyList(this.props.items)},"Отправить в РемСити"))))},e}(d.default);e.default=c.connect(function(t){return s(s({},t.installation),{order_id:t.order.order_id,providers:t.order.installationProviders})})(g)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.getBasketId=function(t,e){var n,r;return null!=(r=null===(n=e.find(function(e){return e.id==t}))||void 0===n?void 0:n.basket_id)?r:0},t}();e.default=r},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),l=n(3),c=n(8),u=n(9),d=n(5),_=n(70),f=n(14),h=n(2),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidUpdate=function(){t.prototype.componentDidUpdate.call(this),this.jqueryUpdate=!1},e.prototype.setBasketSupplierCommission=function(t,e){var n=parseInt(e.target.value);f.default.setBasketSupplierCommission(t,n)},e.prototype.setInstalSupplierCommission=function(t,e){var n=parseInt(e.target.value);f.default.setInstalSupplierCommission(t,n)},e.prototype.setBasketAccountMonth=function(t,e,n){f.default.setBasketAccountMonth(t,e,n.val)},e.prototype.setInstalAccountMonth=function(t,e,n){f.default.setInstalAccountMonth(t,e,n.val)},e.prototype.setShareManager=function(t,e){return void 0===e&&(e=!1),(!e||this.props.share_com_manager>0)&&(f.default.setShareManager(t.val),!0)},e.prototype.renderSaleTable=function(){var t=this;return i.h("div",{class:"table form"},i.h("table",{class:"table__main"},i.h("thead",{class:"table__thead"},i.h("tr",{class:"table__tr"},i.h("th",{class:"table__th"},"Наименование"),i.h("th",{class:"table__th"},"Поставщик"),i.h("th",{class:"table__th"},"№ заказа"),i.h("th",{class:"table__th"},"Дата отгрузки"),i.h("th",{class:"table__th"},"Цена продажи"),i.h("th",{class:"table__th"},"Цена закупки"),i.h("th",{class:"table__th"},"Логистика"),i.h("th",{class:"table__th"},"Комиссия наша"),i.h("th",{class:"table__th"},"Комиссия пост."),i.h("th",{class:"table__th"},"Разница"),i.h("th",{class:"table__th"},"Месяц учета ВП"),i.h("th",{class:"table__th"},"Месяц учета ЗП"))),i.h("tbody",{class:"table__tbody"},this.props.basket_items.map(function(e){return i.h("tr",{class:"table__tr"+(e.is_claim?" table__tr_state_disabled":"")},i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-xl_m"},i.h("a",{class:"link link_styel_classic",href:e.url},e.title)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},e.supplier_name))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},e.account))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},e.date))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},u.default.fnum(e.sale)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},u.default.fnum(e.purchase)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"order__field order__field_size_m-xs"},u.default.fnum(e.logistics)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},u.default.fnum(e.commission)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_xs"},i.h("input",{type:"text",value:e.suppl_commission,class:"form__input",onChange:t.setBasketSupplierCommission.bind(t,e)})))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},u.default.fnum(e.diff)))),i.h("td",{class:"table__td"},i.h("div",{class:"form__field form__field_size-m_s"},i.h(d.default,{key:d.default.key(),items:_.default.getMonths(),value:e.mounth_vp,onSelect:t.setBasketAccountMonth.bind(t,"month_vp",e),class:"js-select form__select"}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__field form__field_size-m_s"},i.h(d.default,{key:d.default.key(),items:_.default.getMonths(),value:e.mounth_zp,onSelect:t.setBasketAccountMonth.bind(t,"month_zp",e),class:"js-select form__select"}))))}),i.h("tr",{class:"table__tr"},i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"table__marked"},"Итого:"))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"}," ")),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"}," ")),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"}," ")),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.basket_sum.sale)))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.basket_sum.purchase)))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.basket_sum.logistics)))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.basket_sum.commission)))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.basket_sum.suppl_commission)))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.basket_sum.diff)))),i.h("td",{class:"table__td table__td_valign_bottom"}," "),i.h("td",{class:"table__td table__td_valign_bottom"}," ")))))},e.prototype.renderInstallationTable=function(){var t=this;return i.h("div",{class:"table form"},i.h("table",{class:"table__main"},i.h("thead",{class:"table__thead"},i.h("tr",{class:"table__tr"},i.h("th",{class:"table__th"},"Наименование"),i.h("th",{class:"table__th"},"Поставщик"),i.h("th",{class:"table__th"},"№ заказа"),i.h("th",{class:"table__th"},"Дата отгрузки"),i.h("th",{class:"table__th"},"Цена продажи"),i.h("th",{class:"table__th"},"Цена закупки"),i.h("th",{class:"table__th"},"Выезд"),i.h("th",{class:"table__th"},"Логистика"),i.h("th",{class:"table__th"},"Комиссия наша"),i.h("th",{class:"table__th"},"Комиссия пост."),i.h("th",{class:"table__th"},"Разница"),i.h("th",{class:"table__th"},"Месяц учета ВП"),i.h("th",{class:"table__th"},"Месяц учета ЗП"))),i.h("tbody",{class:"table__tbody"},this.props.instal_items.map(function(e){var n;return i.h("tr",{class:"table__tr"+(e.is_claim?" table__tr_state_disabled":"")},i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-xl_m"},i.h("a",{class:"link link_styel_classic",href:e.url},e.title)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},null!=(n=h.default.getSelectItem(e.provider,t.props.installation_providers))?n:"-"))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},e.account))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field-_sizes_xs"},e.date))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},u.default.fnum(e.sale)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},u.default.fnum(e.purchase)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},u.default.fnum(e.master)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},u.default.fnum(e.logistics)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},u.default.fnum(e.commission)))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("input",{type:"text",value:u.default.fnum(e.suppl_commission),class:"form__input",onChange:t.setInstalSupplierCommission.bind(t,e)})))),i.h("td",{class:"table__td"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},u.default.fnum(e.diff)))),i.h("td",{class:"table__td"},i.h("div",{class:"form__field form__field_size-m_s"},i.h(d.default,{key:d.default.key(),items:_.default.getMonths(),value:e.mounth_vp,onSelect:t.setInstalAccountMonth.bind(t,"month_vp",e),class:"js-select form__select"}))),i.h("td",{class:"table__td"},i.h("div",{class:"form__field form__field_size-m_s"},i.h(d.default,{key:d.default.key(),items:_.default.getMonths(),value:e.mounth_zp,onSelect:t.setInstalAccountMonth.bind(t,"month_zp",e),class:"js-select form__select"}))))})),i.h("tfoot",{class:"table__tfoot"},i.h("tr",{class:"table__tr table__tr_style_ninja"},i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"table__marked"},"Итого:"))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"}," "))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"}," "))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"}," "))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.sale))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.purchase))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.master))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.logistics))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-s_xs"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.commission))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.suppl_commission))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"table__td-disabled"},i.h("div",{class:"form__field form__field_size-m_s"},i.h("div",{class:"marked status_failed"},u.default.fnum(this.props.instal_sum.diff))))),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"form__field form__field_size-m_s"}," ")),i.h("td",{class:"table__td table__td_valign_bottom"},i.h("div",{class:"form__field form__field_size-m_s"}," "))))))},e.prototype.renderManagers=function(){return i.h("div",{class:"table table_style_simple table_width_auto"},i.h("table",{class:"table__main"},i.h("thead",{class:"table__thead"},i.h("tr",{class:"table__tr"},i.h("th",{class:"table__th table__th_close_bottom"},"Делить комиссию"),i.h("th",{class:"table__th table__th_close_bottom"}," Укажите менеджера"))),i.h("tbody",{class:"table__tbody"},i.h("tr",{class:"table__tr"},i.h("td",{class:"table__td table__td_close_bottom"},i.h("div",{class:"form__line form__line_type_close form__field form__field_size-m_s"},i.h(c.default,{checked:this.props.share_com_manager>0,text:this.props.share_com_manager>0?"Да":"Нет",onClick:this.setShareManager.bind(this,{title:"",val:0},!0),awaitConfirm:!0}))),i.h("td",{class:"table__td table__td_close_bottom"},i.h("div",{class:"form__line form__line_type_close form__field form__field_size-xl_m"},i.h(d.default,{key:d.default.key(),items:h.default.getManagersForSelection(),onSelect:this.setShareManager.bind(this),value:this.props.share_com_manager,class:"js-select form__select",default:{title:"",val:0}})))))))},e.prototype.render=function(){return i.h("div",null,i.h("span",{class:"panel__title panel__title_type_subtitle"},"Продажа бытовой техники"),i.h("div",{class:"panel__item"},this.renderSaleTable()),i.h("div",{class:"panel__place panel__item"},this.renderManagers()),i.h("h3",{class:"panel__title panel__title_type_subtitle"},"Продажа установки бытовой техники"),this.renderInstallationTable())},e}(l.default);e.default=o.connect(function(t){return s(s({},t.profit),{share_com_manager:t.order.share_com_manager,installation_providers:t.order.installationProviders})})(p)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(30),a=function(){function t(){}return t.getMonths=function(){var t=[];for(var e in r.MONTHS)t.push({title:r.MONTHS[e],val:e});return t},t}();e.default=a},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(a,s){function i(t){try{l(r.next(t))}catch(t){s(t)}}function o(t){try{l(r.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?a(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(i,o)}l((r=r.apply(t,e||[])).next())})},i=this&&this.__generator||function(t,e){var n,r,a,s,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=e.call(t,i)}catch(t){s=[6,t],r=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),l=n(1),c=n(7),u=n(3),d=n(8),_=n(26),f=n(5),h=n(2),p=n(11),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.componentDidMount=function(){var t=this;_.default.loadAll(),_.default.loadComments(),$(this.fileInput).change(function(){var e=new FormData;e.append("file",$(t.fileInput)[0].files[0]),_.default.saveFile(e),t.fileInput.value=""}),T50PubSub.subscribe("reclamation_comment_modal_submit",function(e){return s(t,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,_.default.addComment(e)];case 1:return t.sent()&&$.fancybox.close(),[2]}})})})},e.prototype.unsetRemind=function(t,e){0==e&&null!=t.remind_date&&confirm("Отключить напоминание?")&&_.default.changeCommentItemRemindData(t.id,null)},e.prototype.updateRemindData=function(t,e,n){var r=n.target.value;if(0!=r.length){var a={remind_date:t.remind_date,remind_time:t.remind_time};a[e]=r,null!=a.remind_date&&_.default.changeCommentItemRemindData(t.id,a)}},e.prototype.onSelect=function(t,e){_.default.update(t,e.val)},e.prototype.changeInput=function(t,e){var n=e.target;_.default.update(t,n.value)},e.prototype.saveFile=function(t){t.preventDefault(),this.fileInput.name=name,$(this.fileInput).trigger("click")},e.prototype.getFiles=function(){var t=this,e=function(t,e){e.preventDefault(),confirm("Удалить файл?")&&_.default.removeFile(t.id)};return this.props.files.map(function(n){return o.h("li",{class:"files-list__item"},o.h("a",{href:n.path,target:"_blank",class:"files-list__link"},n.title),o.h("a",{href:"#",class:"files-list__remove",onClick:e.bind(t,n)},o.h(c.default,{name:"icon_delete",class:"files-list__remove-icon"})))})},e.prototype.getComments=function(){var t=this;return this.props.comments.map(function(e){return[o.h("div",{class:"table__caption"},o.h("span",{class:"table__marked"},e.manager)," ",o.h("span",{class:"table__reduced table__rt-info"},e.date)),o.h("div",{class:"table table_style_simple table_width_auto"},o.h("table",{class:"table__main"},o.h("tr",{class:"table__tr"},o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"form__field form__field_size-xxxl_m"},o.h("div",{class:"form__input form__input_type_pseudo form__input_width_auto form__input_style_disabled"},e.target_managers.length?o.h("span",{class:"form__mark"},e.target_managers.map(function(t){return h.default.getManager(t)}).join(", "),", "):null,e.message))),o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"form__field"},o.h(d.default,{checked:e.remind,onClick:t.unsetRemind.bind(t,e),text:"напомнить"}))),o.h("td",{class:"table__td table__td_close_top"},o.h("div",{class:"dual-panel"},o.h("div",{class:"dual-panel__row"},o.h("div",{class:"dual-panel__col"},o.h("div",{class:"form__field form__field_size-m_s"},o.h(p.default,{type:"date",onChange:t.updateRemindData.bind(t,e,"remind_date"),value:e.remind_date}))),o.h("div",{class:"dual-panel__col"},o.h("div",{class:"form__field form__field_size-s_s"},o.h(p.default,{type:"time",onChange:t.updateRemindData.bind(t,e,"remind_time"),value:e.remind_time})))))))))]})},e.prototype.render=function(){var t,e=this;return o.h("div",null,o.h("div",{class:"panel__section"},o.h("div",{class:"form__line"},o.h("div",{class:"table table_style_simple table_width_auto"},o.h("table",{class:"table__main"},o.h("tr",{class:"table__tr"},o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-l_xs"},o.h("div",{class:"form__label"},"Дата обращения"),o.h(p.default,{type:"date",onChange:this.changeInput.bind(this,"date_request"),value:this.props.date_request}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-l_xs"},o.h("div",{class:"form__label"},"Дата обработки"),o.h(p.default,{type:"date",onChange:this.changeInput.bind(this,"date_start"),value:this.props.date_start}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_xs"},o.h("div",{class:"form__label"},"Причина обращения"),o.h(f.default,{onSelect:this.onSelect.bind(this,"reason"),items:this.props.reasons,class:"js-select form__select",value:this.props.reason,default:{title:"-",val:0,disabled:!1}}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_xs"},o.h("div",{class:"form__label"},"Требование клиента"),o.h(f.default,{onSelect:this.onSelect.bind(this,"requirement"),items:this.props.requirements,class:"js-select form__select",value:this.props.requirement,default:{title:"-",val:0,disabled:!1}}))))))),o.h("div",{class:"form__field form__field_size-xxxl_xs"},o.h("label",{class:"form__line"},o.h("div",{class:"form__label"},"Описание"),o.h("textarea",{class:"form__textarea form__textarea_size_middle",onChange:this.changeInput.bind(this,"description"),value:this.props.description}))),o.h("div",{class:"form__section"},o.h("div",{class:"form__label"},"Прикрепленные документы"),o.h("div",{class:"files-field"},o.h("input",{type:"file",class:"hidden"}),o.h("div",{class:"files-field__list"},o.h("ul",{class:"files-list"},this.getFiles())),o.h("div",{class:"files-field__controls"},o.h("div",{class:"files-field__control"},o.h("input",{type:"file",class:"hidden",ref:function(t){return e.fileInput=t}}),o.h("a",{class:"link link_style_default-trigger",href:"#",onClick:this.saveFile.bind(this)},"Загрузить"))))),(null===(t=this.props.comments)||void 0===t?void 0:t.length)?o.h("div",{class:"form__label"},"Хронология работы с рекламацией"):null,this.getComments(),o.h("div",{class:"panel__foot panel__foot_type_full"},o.h("div",{class:"panel__main"},o.h("a",{class:"button button_type_concrete js-modal","data-reclamation":"Y",href:"#order_comment"},"Добавить комментарий")))),o.h("div",{class:"table table_style_simple table_width_auto"},o.h("table",{class:"table__main"},o.h("tr",{class:"table__tr"},o.h("th",{class:"table__th"},"Дата решения"),o.h("th",{class:"table__th"},"Итог по рекламации"),o.h("th",{class:"table__th"},"Ошибка"),o.h("th",{class:"table__th"},"Ответственный менеджер")),o.h("tr",{class:"table__tr"},o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-l_xs"},o.h(p.default,{type:"date",onChange:this.changeInput.bind(this,"date_finish"),value:this.props.date_finish}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_xs"},o.h(f.default,{onSelect:this.onSelect.bind(this,"result"),items:this.props.results,class:"js-select form__select",value:this.props.result,default:{title:"-",val:0,disabled:!1}}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_xs"},o.h(f.default,{onSelect:this.onSelect.bind(this,"error"),items:this.props.errors,class:"js-select form__select",value:this.props.error,default:{title:"-",val:0,disabled:!1}}))),o.h("td",{class:"table__td"},o.h("label",{class:"form__line form__line_type_close form__field form__field_size-xl_xs"},o.h(f.default,{items:h.default.getManagersForSelection(),onSelect:this.onSelect.bind(this,"manager"),value:this.props.manager,class:"js-select form__select",default:{title:"-",val:0,disabled:!1}})))))))},e}(u.default);e.default=l.connect(function(t){return{files:t.reclamation.files,description:t.reclamation.description,requirement:t.reclamation.requirement,requirements:t.reclamation.requirements,reason:t.reclamation.reason,reasons:t.reclamation.reasons,error:t.reclamation.error,errors:t.reclamation.errors,result:t.reclamation.result,results:t.reclamation.results,date_request:t.reclamation.date_request,date_finish:t.reclamation.date_finish,date_start:t.reclamation.date_start,manager:t.reclamation.manager,comments:t.reclamation.comments}})(v)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(1),o=n(3),l=n(5),c=n(2),u=n(9),d=n(6),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e.prototype.changeStatus=function(t){d.default.setValue("status",parseInt(t.val))},e.prototype.componentDidUpdate=function(){t.prototype.componentDidUpdate.call(this),this.jqueryUpdate=!1},e.prototype.render=function(){var t=this.props;return s.h("div",{class:"table table_style_simple table_width_auto"},s.h("table",{class:"table__main"},s.h("div",{class:"table__tr"},s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-xl_xs"},s.h("div",{class:"form__label"},"Магазин"),s.h("input",{value:t.shop,readOnly:!0,class:"form__input"}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-l_xs"},s.h("div",{class:"form__label"},"№ заказа магазина"),s.h("input",{value:t.remote_order_id>0?t.remote_order_id:"",readOnly:!0,class:"form__input"}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-xl_xs"},s.h("div",{class:"form__label"},"Менеджер"),s.h("input",{value:c.default.getManager(this.props.manager_id),readOnly:!0,class:"form__input"}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-xl_xs"},s.h("div",{class:"form__label"},"Источник"),s.h("input",{value:c.default.getSelectItem(t.source_id,t.sources),readOnly:!0,class:"form__input"}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-xl_xs status_in-progress marked"},s.h("div",{class:"form__label"},"Статус"),s.h(l.default,{class:"js-select form__select",items:t.statuses,value:t.status_id,onSelect:this.changeStatus.bind(this)}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-xl_xs"},s.h("div",{class:"form__label"},"Дата обработки"),s.h("input",{value:t.dateCreate,readOnly:!0,class:"form__input"}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-xl_xs"},s.h("div",{class:"form__label"},"Дата отгрузки"),s.h("input",{value:t.delivery_date,readOnly:!0,class:"form__input"}))),s.h("td",{class:"table__td"},s.h("label",{class:"form__line form__field form__field_size-m_s"},s.h("div",{class:"form__label"},"Комиссия (руб.)"),s.h("input",{value:u.default.fnum(t.comission),readOnly:!0,class:"form__input"}))))))},e}(o.default);e.default=i.connect(function(t){return{shop:t.order.shop,remote_order_id:t.order.remote_order_id,manager_id:t.order.manager,source_id:t.order.source,status_id:t.order.status,sources:t.order.sources,statuses:t.order.statuses,dateCreate:t.order.dateCreate,delivery_date:t.profit.delivery_date,comission:t.profit.full_commission}})(_)},function(t,e,n){"use strict";var r,a=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s=n(0),i=n(8),o=n(1),l=n(27),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={},e}return a(e,t),e.prototype.onChange=function(t){if(t&&!confirm("Включить режим множественного обновления?"))return!1;switch(this.state.block){case"delivery":l.default.switchDelivery(t);break;case"accounts":l.default.switchAccount(t);break;case"install":l.default.switchInstall(t)}return!0},e.prototype.componentDidMount=function(){this.setState({block:this.props.block})},e.prototype.render=function(){var t=this.props[this.state.block];return s.h(i.default,{checked:t,awaitConfirm:!0,onClick:this.onChange.bind(this),text:"Один поставщик"})},e}(s.Component);e.default=o.connect(function(t){return t.once_supplier})(c)}]);